<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bloggus Doekmanni</title>
    <description>This is Bloggus Doekmanni, or Doekman&apos;s blog if you like. A bit of drivel about computer programming; some dead serious, some not so much...
</description>
    <link>https://blog.zanstra.com/</link>
    <atom:link href="https://blog.zanstra.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 14 May 2024 11:32:46 +0200</pubDate>
    <lastBuildDate>Tue, 14 May 2024 11:32:46 +0200</lastBuildDate>
    <generator>Jekyll v4.3.3</generator>
      <item>
        <title>Google OAuth &quot;Invalid-Grant&quot; Nightmare ‚Äî and How I Fixed It</title>
        <description>
          &lt;p&gt;I‚Äôm maintaining a couple of web applications, which use &lt;em&gt;login-with-google&lt;/em&gt; for authentication. It also uses &lt;em&gt;OAuth&lt;/em&gt; to access some of Google API‚Äôs. They are private applications, with less than 100 users.&lt;/p&gt;

&lt;p&gt;A while ago, one user reported an error with an application. Said user could log in, but when accessing a Google API, it would return the error ‚Äúinvalid-grant‚Äù.&lt;/p&gt;

&lt;p&gt;I tried a lot of things, but &lt;a href=&quot;https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35&quot;&gt;this blog article&lt;/a&gt; was most helpful (see also this &lt;a href=&quot;https://stackoverflow.com/a/38433986/56&quot;&gt;Stack Overflow&lt;/a&gt; entry). But solving the problem was not possible at the time. Nothing from the article worked. The user didn‚Äôt need to call the Google API since there was a workaround, so I left it at that.&lt;/p&gt;

&lt;p&gt;Months later, one direct collegue reported the same thing. Again, nothing I could think of or found on the internet seemed to work. This was more of a problem, since the collegue actually needed the functionality. And also, this not understood behaviour of OAuth was a ticking time bomb. And then, without an plain reason, I had an epiphany. Why not generate new credentials within the same project?&lt;/p&gt;

&lt;p&gt;It was worth a try. So I generated a &lt;a href=&quot;https://support.google.com/cloud/answer/6158849?hl=en-GB&quot;&gt;new ‚ÄúOAuth 2.0 Client IDs‚Äù entry&lt;/a&gt; within the Google Cloud console. In the database, I emptied the oauth-session table. I made a backup, so I could revert the change if necessary. I also emptied the web application‚Äôs session table in the database. Via this way, all users are forced to re-authenticate. The web session table doesn‚Äôt have important data in it, so in my case this was possible.&lt;/p&gt;

&lt;p&gt;And the fix worked well. Users did need to re-authenticate, but they didn‚Äôt need to grant permissions to use the app. I guess permissions are stored on project level, so this was not neccssary. It still is a bit unsatisfactory the underlying problem isn‚Äôt known, but I‚Äôm pretty happy the error is gone now.&lt;/p&gt;


        </description>
        <pubDate>Tue, 14 May 2024 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/ict/2024/05/14/google-oauth-invalid-grant-nightmare-and-how-i-fixed-it.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/ict/2024/05/14/google-oauth-invalid-grant-nightmare-and-how-i-fixed-it.html</guid>
        <category>ICT</category>
      </item>
      <item>
        <title>Stylize Text Files on the Terminal With awkcss</title>
        <description>
          &lt;p&gt;Since I‚Äôve been introduced to UNIX, I‚Äôve been intrigued by the &lt;em&gt;awk&lt;/em&gt; program. Most of the time when I use it, it‚Äôs to extract a value from a text file. Yet it can do so much more than that: it‚Äôs a full blown programming language. It‚Äôs a text processing language, which runs one or more pattern/action combinations:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pattern { action }
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When the pattern matches a line, the action is executed. But at a certain moment I realized the pattern/action-combo looked a lot like CSS. In CSS you have rules, which are made up by selectors and property assignments. &lt;em&gt;awk&lt;/em&gt; also calls them rules. Selectors and properties. Patterns and actions. A light bulb üí° moment: &lt;strong&gt;awkcss&lt;/strong&gt; was born.&lt;/p&gt;

&lt;p&gt;The pattern in awk can be seen as an expression which selects a line or not. In the actions part we can use function calls as property setters. So, what properties would be easy to set? I would like to show the capabilities of awkcss by providing some examples.&lt;/p&gt;

&lt;p&gt;Take for example this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zebra.awkcss&lt;/code&gt; stylesheet:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NR % 2 == 1 { 
    color(black);
    background_color(gray);
}
NR % 2 == 0 { 
    color(white);
    background_color(black);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To show the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README.md&lt;/code&gt; with zebra stripes, run the following command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; $ awkcss -f zebra.awkcss README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first pattern/action combo (‚Äúrule‚Äù) selects odd lines (in awk, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NR&lt;/code&gt; variable contains the 1-based line number). For properties I‚Äôve created the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;color&lt;/code&gt;- and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;background_color&lt;/code&gt;-functions. As property values I‚Äôve used variables, although you can also use strings.&lt;/p&gt;

&lt;p&gt;About the naming convention: CSS claimed the &lt;em&gt;dash-separator&lt;/em&gt;, and JavaScript is doing &lt;em&gt;camelCasing&lt;/em&gt;. To differentiate awkcss from the CSS and JavaScript, I was forced to use &lt;em&gt;snake_casing&lt;/em&gt; as a naming convention. Having the best readable CSS-dialect is considered a bonus.&lt;/p&gt;

&lt;p&gt;To create a simple MarkDown stylizer, checkout this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;markdown.awkcss&lt;/code&gt; stylesheet:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;BEGIN {
    width(72);
}
/^#+ / {
    color(yellow);
    font_weight(bold);
}
/^\t| {4,}/ {
    color(&quot;gray&quot;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BEGIN&lt;/code&gt;-rule sets the default width. It‚Äôs like the CSS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt;-selector. The second rule matches any lines starting with a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#&lt;/code&gt;-sign to match MarkDown headings. And the third rule matches code-blocks, starting with a tab character, or 4 spaces.&lt;/p&gt;

&lt;p&gt;Suppose you don‚Äôt want to render code-blocks, you can use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;display&lt;/code&gt;-property with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;none&lt;/code&gt;-variable:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/^\t| {4,}/ {
    display(none); 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There is also a box-model:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/^&amp;gt;/ {
    block_name(&quot;block_quote&quot;);
    border(ascii);
    border_style_left(none);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This rule matches block quotes, and draws a border around it. Since a block quote already starts with a border-like character, the left border is set to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;none&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;An issue with awk is that a pattern selects one line only. For inline-properties like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;color&lt;/code&gt; this is not a problem. But we don‚Äôt want to draw a border around every line. We need a mechanism to draw a border around the whole block quote instead. For this the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block_name&lt;/code&gt; property can be used. All consecutive lines with the same block name are considered to be part of the same block.&lt;/p&gt;

&lt;p&gt;There is also support for media-queries:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/^\t| {4,}/ {
    color(&quot;gray&quot;);
}
/^\t| {4,}/ &amp;amp;&amp;amp; LINES &amp;lt;= 25 {
    white_space(pre);
    text_overflow(ellipsis);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This stylesheet renders MarkDown-code gray. For terminals with limited height, lines are not wrapped (default &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;white_space&lt;/code&gt; is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_wrap&lt;/code&gt;). And when the line overflows, it is truncated and an ellipsis (‚Ä¶) is shown at the end. Besides the &lt;em&gt;number of lines&lt;/em&gt;, there are also variables for &lt;em&gt;number of columns&lt;/em&gt; and &lt;em&gt;colors&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Finally, you can use some pseudo-elements as well:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/^#+ / {
    color(bright_blue);
}
/^#+ / &amp;amp;&amp;amp; select(&quot;::after&quot;) {
    content(&quot;------------------------------------------------&quot;);
    select();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will display a line under every heading. Because of the way &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awk&lt;/code&gt; works, the selector will need to be reset at the end of the rule by calling &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;select&lt;/code&gt; with no arguments. The inserted pseudo-element is block level, meaning it will insert a line below the heading. Of course, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;::before&lt;/code&gt; pseudo-element is also supported.&lt;/p&gt;

&lt;p&gt;Although I used MarkDown in this blog as an example, the use cases don‚Äôt stop there. It can be used to better inspect &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/passwd&lt;/code&gt; by hiding system accounts, printing comments gray and high lighting accounts.&lt;/p&gt;

&lt;p&gt;And I didn‚Äôt even touch everything. Check out the properties &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;margin&lt;/code&gt; (including margin-collapse), &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tab_size&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text_decoration&lt;/code&gt; (both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;underline&lt;/code&gt; and/or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blink&lt;/code&gt;) and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;width&lt;/code&gt;: they are all documented in the &lt;a href=&quot;https://github.com/doekman/awkcss/blob/main/reference.md&quot;&gt;AWKCSS Reference&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Getting started: Check out the &lt;a href=&quot;https://github.com/doekman/awkcss/tree/main&quot;&gt;repository on GitHub&lt;/a&gt;; the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README.md&lt;/code&gt; contains all information to get you started using awkcss!&lt;/p&gt;

&lt;h2 id=&quot;how-does-this-all-work&quot;&gt;How Does This All Work&lt;/h2&gt;

&lt;p&gt;If you want to know exactly how &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awk&lt;/code&gt; is called, just add the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--debug&lt;/code&gt; argument, and the command that would have been ran is displayed (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;¬ß&lt;/code&gt; is the repository-home):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; $ awkcss --debug -f zebra.awkcss README.md
 awk -v COLS=180 -v LINES=50 -v COLORS=256 -f ¬ß/library.awk -f ¬ß/awkcss/defaults.awkcss 
     -f ¬ß/awkcss/examples/zebra.awkcss -f ¬ß/awkcss/render.awk README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/doekman/awkcss/blob/main/reference.md#awk-specific-information&quot;&gt;reference&lt;/a&gt; also contains some technical information about this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awk&lt;/code&gt;-implementation. Finally, if you are interested in the source code, I suggest to check out the &lt;a href=&quot;https://github.com/doekman/awkcss/tree/version-0.1&quot;&gt;version 0.1-branch&lt;/a&gt; first. This contains the initial implementation without buffering and other more advanced stuff.&lt;/p&gt;

&lt;p&gt;There is still a lot left to be desired. There are bugs, more test coverage will be very helpful. But the biggest missing feature is table-support. After all, working with columns/cells (like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$3&lt;/code&gt;) is awk‚Äôs biggest feature. However, to implement support for that, the render engine needs to be re-architected. We‚Äôll see what the future holds.&lt;/p&gt;


        </description>
        <pubDate>Thu, 18 Apr 2024 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/ict/2024/04/18/stylize-text-files-on-the-terminal-with-awkcss.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/ict/2024/04/18/stylize-text-files-on-the-terminal-with-awkcss.html</guid>
        <category>ICT</category>
      </item>
      <item>
        <title>Integer Exposed Rewrite</title>
        <description>
          &lt;p&gt;For a company-internal web application I‚Äôve used &lt;a href=&quot;https://github.com/stefanhaustein/notemplate&quot;&gt;NoTemplate.js&lt;/a&gt; (disclosure: I‚Äôm a contributor to the project). It‚Äôs a minimal library for dynamically generating DOM nodes. And really like it. It hardly introduces abstractions. It wraps the W3C DOM API with a simple interface. And with ‚Äúsimple‚Äù I mean more JavaScriptesque, if that‚Äôs a word.&lt;/p&gt;

&lt;p&gt;The biggest reason to use &lt;em&gt;NoTemplate&lt;/em&gt; was its simplicity. I probably won‚Äôt work much on this internal application, but when I do I don‚Äôt want to spend a lot of time getting up to speed. I won‚Äôt be working on it within 6 months, but it also can be 2 years. So I was happily surprised I‚Äôm not alone in wanting to keep things simple. See for example this piece about &lt;a href=&quot;https://jvns.ca/blog/2023/02/16/writing-javascript-without-a-build-system/&quot; title=&quot;Writing Javascript without a build system, by Julia Evans&quot;&gt;Writing Javascript without a build system&lt;/a&gt;. So when Julia Evans wrote about her &lt;a href=&quot;https://jvns.ca/blog/2023/04/19/new-playground-integer-exposed/&quot; title=&quot;New playground: integer.exposed, by Julia Evans&quot;&gt;new playground&lt;/a&gt;, I got the idea to rewrite this playground with NoTemplate.&lt;/p&gt;

&lt;p&gt;With this blog, I try to show the process of this rewrite. Not sure if this is interesting. I do get technical, but I try only to mention the interesting and relevant bits. Well, let‚Äôs get on with it.&lt;/p&gt;

&lt;h1 id=&quot;the-rewrite&quot;&gt;The Rewrite&lt;/h1&gt;

&lt;p&gt;In this part I‚Äôm going to explain how I approached the rewrite. The code is &lt;a href=&quot;https://github.com/doekman/integer.exposed&quot;&gt;published on GitHub&lt;/a&gt;, and every step is a commit in the git repository. I primary written this section as a way to prevent myself from writing the code, and end up not blogging about it. So if you don‚Äôt think this is interesting, you can skip to the next section. And when I say ‚Äúrewrite‚Äù, I probably should say ‚Äúrewire‚Äù. I reused most of the code from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;script.js&lt;/code&gt; and only made minor changes.&lt;/p&gt;

&lt;p&gt;First step in the rewrite is to copy the source files and use these as a base for the rewrite. If you want, you can follow these steps on GitHub as I‚Äôve created a commit for every step &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit 11c34fa Initial)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The first step is to replace the Vue library include with the NoTemplate one. I also emptied the script.js file. Now I look at the Vue template. It‚Äôs the HTML contained by the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;div id=&quot;app&quot;&amp;gt;&lt;/code&gt; tag/element. With NoTemplate, we write the view-template with JavaScript. So let‚Äôs first translate the HTML without the behavior (events).&lt;/p&gt;

&lt;p&gt;To keep things simple at this point, the UI will display 16 bit by default. Also, I only show the 16-bit pattern for now. And as I mentioned, the app is not interactive. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form&lt;/code&gt;-method in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;script.js&lt;/code&gt; generates the HTML view &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit 9551612 Static version)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;We want to render the view from values. For that, I introduced the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state&lt;/code&gt; property, and some  property getters. One thing to note is how the &lt;em&gt;bit pattern&lt;/em&gt;-section is generated. With NoTemplate, everything is an expression. So first an array is created for every byte. Then this array is mapped to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;span&lt;/code&gt;-elements.&lt;/p&gt;

&lt;p&gt;This version of the code doesn‚Äôt respond to dynamic input. But when you change the state-properties in an editor, the form reflects these new values. I tested some different values, and compared them to the output of the original version. Later I realized there are also &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;span&lt;/code&gt;-elements with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;doublebyte&lt;/code&gt;-class. I haven‚Äôt actually observed any different rendering without this class usage. So I skipped implementing them &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit d12e82f Dynamic state)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;And now the step to make it all interesting. Attaching event handlers, and all that is necessary. First I added the property setters and operator methods (not-, shift left-operator etcetera). When working on the event handlers for the text-inputs, I discovered an important disadvantage of using NoTemplate. Later in this blog I will elaborate on this. So with all the click, keyup and blur handlers in place, the rewrite is almost complete &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit 6d8b93f Event handlers)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Until so far I didn‚Äôt notice the original script used an indent of two spaces, while I was using four. Since I copied most code, I now have mixed code. Let‚Äôs fix that now &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit fee5e6c Fix leading whitespace)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The last part to write is to save the form state into the hash part of the URL. I had a little trouble understanding Vue, and how it handles changes of the hash. My initial code seemed to call the render-method twice. So I added the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;settingHash&lt;/code&gt; property to prevent this. And I‚Äôve used the same code to set the state from the hash before the initial render &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit b7df8f1 Handling hash)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;While playing with the playground I missed a button to reset the display to zero. The playground resembles a calculator, so that must have been why I wanted to add it &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit 49a20c5 Clear operator)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.zanstra.com/integer.exposed/&quot;&gt;‚ñ∂Ô∏è&lt;/a&gt; You can &lt;a href=&quot;https://blog.zanstra.com/integer.exposed/&quot;&gt;play with the rewrite here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;About tooling, and especially the simple kind: I‚Äôve used &lt;a href=&quot;https://blog.iconfactory.com/2022/06/worldwideweb-part-2/&quot;&gt;WorldWideWeb&lt;/a&gt; for this project. It‚Äôs a simple, personal web server for macOS. It‚Äôs like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python3 -m http.server&lt;/code&gt;, but it has a GUI and it adds niceness. For example, it automatically reloads the webpage if one of the source files have changed.&lt;/p&gt;

&lt;h1 id=&quot;comparison&quot;&gt;Comparison&lt;/h1&gt;

&lt;p&gt;How do the two implementations compare? For me, two things stand out. First, with Vue the view is rendered before JavaScript has ran because it‚Äôs HTML. With NoTemplate you can get a render flash, because JavaScript has to run before the form is displayed. But if you watch close, you might see a glimpse of several &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{{ bit }}&lt;/code&gt; items at the bit pattern part in the Vue-app. You can see this better when you turn off JavaScript. With NoTemplate you can overcome this by rendering the form at compile time with some kind of build-system. But yeah, you‚Äôll need a build system then‚Ä¶&lt;/p&gt;

&lt;p&gt;But there is one problem with NoTemplate I don‚Äôt directly have a solution for. Let me explain. When a value in the application changes, NoTemplate renders the complete form and replaces the original form with the new one. While this might sound wasteful, in practice with small applications this is not a problem. Until I realized after a blur-event, the focus on the input element was lost (for example changing the signed value of the integer and pressing enter). And that is pretty annoying when you are using the keyboard.&lt;/p&gt;

&lt;p&gt;My first impulse is to solve this problem. I‚Äôm a programmer after all. But this is beyond the scope of this project. However, I will explore three solution directions. The first is to store what element has the focus into the application state. Now the focus can be set &lt;em&gt;after rendering&lt;/em&gt; with a calls to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setfocus()&lt;/code&gt;. Or &lt;em&gt;during rendering&lt;/em&gt; with the  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autofocus&lt;/code&gt;-attribute on the appropriate element.&lt;/p&gt;

&lt;p&gt;We can determine the current focussed element by calling &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document.activeElement&lt;/code&gt;. But how do you serialize this into some string? Some kind of DOM-index would be problematic. In a templating system, the number of nodes can differ from render to render. When the element has an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;-attribute, this is not a problem. But this is not always the case. This could be solved by the NoTemplate library by generating &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;-values for the DOM elements that can have the focus.&lt;/p&gt;

&lt;p&gt;Another problem to tackle is how to determine which element has the focus in all situations. When pressing tab from an input-element, the active element in the blur-event is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document.body&lt;/code&gt;. The same is true for the change-event. Not 100% sure why this is. It might be set at a later stage in the event pipeline.&lt;/p&gt;

&lt;p&gt;The second direction is not to replace the DOM-node, but to apply changes. Make some DOM diff thing. Not sure how this exactly would work, because event-handlers change too (there‚Äôs probably an NPM module for this). Not too fond of this idea.&lt;/p&gt;

&lt;p&gt;I guess the best direction would be just to encode the form in plain HTML, like it was 2002. Only the bit-pattern part is dynamic after all. This part could be generated by NoTemplate.js. And perhaps for attaching the events, I could create something like &lt;a href=&quot;http://dean.edwards.name/jsb/&quot; title=&quot;JavaScript Bindings&quot;&gt;Dean Edwards JSB&lt;/a&gt;. I always liked that idea too.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;It has been a fun project. The outcome is not completely what I wanted, but I learned a lot. The goal was not to create a working app, but to explore after all.&lt;/p&gt;

&lt;p&gt;I discovered that writing the blog while doing the project has a lot of advantages. It keeps me focussed, and it let me do a bit of work while being on the train. I hope this blog makes sense, and like to hear your thoughts on this topic.&lt;/p&gt;

&lt;h1 id=&quot;update&quot;&gt;Update&lt;/h1&gt;

&lt;p&gt;Via &lt;a href=&quot;https://mastodon.nl/@dukoid@mastodon.social/110329152286258188&quot;&gt;Mastodon&lt;/a&gt; I got the tip to defer the blur-event handler, to find out the actual active element. I directly used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setTimeout&lt;/code&gt;, and I got the result I wanted: the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;activeElement&lt;/code&gt; was the element I tabbed to.&lt;/p&gt;

&lt;p&gt;But since it‚Äôs not 2002 anymore, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setTimeout&lt;/code&gt; feels like a hack I looked into promises. So I replaced &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setTimeout&lt;/code&gt; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Promise.resolve(null).then&lt;/code&gt;. But this didn‚Äôt work. The activeElement was document.body again‚Ä¶. What‚Äôs going on?&lt;/p&gt;

&lt;p&gt;After reading about &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Event_loop&quot;&gt;the event loop&lt;/a&gt; on MDN, I read about using promises, and found &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises#task_queues_vs._microtasks&quot;&gt;this quote&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Promise callbacks are handled as a microtask whereas setTimeout() callbacks are handled as task queues.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Long story short: defering code with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setTimeout&lt;/code&gt; works because it‚Äôs a task, and not a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API/Microtask_guide&quot;&gt;microtask&lt;/a&gt;. My understanding is that a microtask would be ran right after the event-handler, while a task would be scheduled in the next iteration of the event loop. Apparently after the blur-handler, there is a task or microtask setting the activeElement. But now I know setTimeout is not as much as a hack I thought it was. It‚Äôs just wat I needed.&lt;/p&gt;

&lt;p&gt;So now we can make the render-method preserve the activeElement. To do so, I first gave every element that can be active an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;-attribute. And after that, I altered the render-method to remember and set the active element around the render. The render is wrapped within a setTimeout, so it is executed as a seperate task. I also used the optional chaining operator (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?.&lt;/code&gt;), because the activeElement can be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;null&lt;/code&gt; and focusable elements may be disappear between renders.&lt;/p&gt;

&lt;p&gt;Also, I changed the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blur&lt;/code&gt;-events to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;change&lt;/code&gt;, because we don‚Äôt need a render when a text-value hasn‚Äôt been changed. Also, I wanted to make all the controls accessible by the keyboard. So I changed the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;span&lt;/code&gt;-items for the bit selector and the bit pattern to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;button&lt;/code&gt; elements, and gave them an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;- and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tabindex&lt;/code&gt;-attribute. To fix their appearance, I only needed to set a couple of CSS properties. As value I used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unset&lt;/code&gt;, and it works like a charm. Now we can tab through all controls, and use the spacebar (or enter) to select or toggle them &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit e98e782 Retaining active element)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;On thing that still bugged me a bit were the bit buttons (pun not intended, but still enjoyed). In the user interface, they differ from the other controls (tab-bar, buttons, text inputs). On macOS, when pressing tab links are skipped. Only ‚Äúproper‚Äù controls get the focus. If you want the next link to get the focus, one can press option+tab (also known as alt+tab). So &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;-elements for the bits seemed a better fit.&lt;/p&gt;

&lt;p&gt;But how should this work? A click handler would not suffice, I would need a keyboard-handler as well. And also &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#onclick_events&quot;&gt;MDN suggested to use buttons instead&lt;/a&gt;. But then I realized, I just can use a hash-link, like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;a href=&quot;#0x01&quot;‚Ä¶&lt;/code&gt;. When I supply the right value for the right bit, no additional scripting is needed. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hashchange&lt;/code&gt;-handler will handle it all. And tabbing (or option-tabbing) to the elements, and pressing enter toggles the bit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(commit xxx A@href bits)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;That‚Äôs it. With this addition I learned even more about JavaScript and the microtasks. Also, the playground is now a bit more accessible, and that‚Äôs nice.&lt;/p&gt;


        </description>
        <pubDate>Wed, 03 May 2023 00:00:00 +0200</pubDate>
        <lastBuildDate>Sat, 13 May 2023 00:00:00 +0200</lastBuildDate>
        <link>https://blog.zanstra.com/ict/2023/05/03/integer-exposed-rewrite.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/ict/2023/05/03/integer-exposed-rewrite.html</guid>
        <category>ICT</category>
      </item>
      <item>
        <title>Wat heeft Archipunt te maken met de Ingenuity Mars Helicopter?</title>
        <description>
          &lt;p&gt;Op 30 april 2021 keek ik op &lt;a href=&quot;https://github.com/doekman/&quot;&gt;m‚Äôn GitHub pagina&lt;/a&gt;, en zag ik dat ik de volgende ‚Äúachievement‚Äù erbij had gekregen:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Mars 2020 Helicopter Contributor&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;&lt;a href=&quot;https://github.com/doekman/&quot;&gt;Doeke Zanstra&lt;/a&gt;&lt;/strong&gt; contributed code to 1 repository used in the &lt;a href=&quot;https://github.com/readme/nasa-ingenuity-helicopter&quot;&gt;Mars 2020 Helicopter Mission&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/pallets/werkzeug&quot;&gt;pallets/werkzeug&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ik was echt &lt;em&gt;totaal&lt;/em&gt; verbaasd. Hoe kan dit? Wat heb ik hieraan gedaan? Maar ik las de tekst hierboven nog een keer, en toen viel het kwartje bij me. Tijdens het werken bij &lt;a href=&quot;https://archipunt.nl/&quot;&gt;Archipunt&lt;/a&gt; heb ik aan software gewerkt wat ook gebruikt is bij het laten vliegen van een helicopter op Mars.&lt;/p&gt;

&lt;p&gt;OK. Dit behoeft enige toelichting.&lt;/p&gt;

&lt;h2 id=&quot;apawa&quot;&gt;APAWA&lt;/h2&gt;

&lt;p&gt;Aan het eind van 2017 was ik bij Archipunt aan het werk aan &lt;a href=&quot;https://apawa.archipunt.nl/&quot; title=&quot;Archipunt Piekgrond Acceleratie Web Applicatie.&quot;&gt;APAWA&lt;/a&gt;. Dit is een &lt;em&gt;web-applicatie&lt;/em&gt; voor het berekenen van het lokale effect (voor een specifiek adres dus) van aardbevingen. Ik kan hier verder uitleggen wat dat precies is, maar het is misschien gemakkelijker om voorgenoemde link te klikken en zelf een kijkje te nemen.&lt;/p&gt;

&lt;p&gt;Terloops noemde ik het woord ‚Äúweb-applicatie‚Äù: dit is de software van het internet. In feite een gewone applicatie, zoals bijvoorbeeld Microsoft Word, alleen dan voor het &lt;em&gt;web&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;En die software was ik dus aan het schrijven. Maar om het wiel niet iedere keer opnieuw uit te vinden maak ik gebruik van software componenten. En voor het web-applicatie aspect van deze software maak ik gebruik van het &lt;em&gt;open source&lt;/em&gt; component met de naam &lt;a href=&quot;https://flask.palletsprojects.com/en/2.0.x/&quot;&gt;Flask&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Open source is erg handig. De broncode is beschikbaar. Zodat als je een fout tegenkomt, kun je deze analyseren. Meestal heb je zelf een fout gemaakt, en is de broncode handig om daar achter te komen. Heel, heel soms kom je iets tegen wat verbetering behoeft. Ook dan is open source handig: niet alleen de broncode is open, maar het hele proces is open. Ook verbeter trajecten. Voordat ik hier op in ga nog even het volgende.&lt;/p&gt;

&lt;p&gt;Flask zelf bestaat ook weer uit componenten. Ik liep tegen een onvolkomenheid aan in het component &lt;em&gt;Werkzeug&lt;/em&gt; (overigens: zowel Flask als Werkzeug is niet in Amerika, maar bij onze Oosterburen bedacht).&lt;/p&gt;

&lt;p&gt;E√©n van de functionaliteiten van Werkzeug is het bepalen welke &lt;em&gt;browser&lt;/em&gt; (zoals Chrome, Safari of Firefox) een eind-gebruiker gebruikt. In een moderne applicatie wil je niet dat er een gedateerde browser gebruikt: de belangrijkste reden hiervoor is om de test-inspanning niet te groot te laten worden.&lt;/p&gt;

&lt;p&gt;Nu was er een gebruiker die &lt;em&gt;Microsoft Edge&lt;/em&gt; (de opvolger van Internet Explorer) gebruikte. En deze werd niet herkend door &lt;em&gt;Werkzeug&lt;/em&gt;, en dus ook niet door Apawa. Edge maakt onder water gebruik van hetzelfde component als Chrome, en is dus modern. Reden om Edge toe te voegen. Als je wilt zien hoe dit er exact uit ziet, &lt;a href=&quot;https://github.com/pallets/werkzeug/pull/1216&quot; title=&quot;Pull Request om edge browser detectie aan Werkzeug toe te voegen&quot;&gt;kijk dan hier&lt;/a&gt; voor de details.&lt;/p&gt;

&lt;p&gt;Tot hier heb ik uitgelegd hoe software ontwikkeling kan leiden tot een toevoeging van een open source component. Maar wat heeft dit met Helicopters, Mars en NASA te maken?&lt;/p&gt;

&lt;h2 id=&quot;helicopters-mars-en-nasa&quot;&gt;Helicopters, Mars en NASA&lt;/h2&gt;

&lt;p&gt;Laat ik om te beginnen verwijzen naar het Engelstalige artikel &lt;a href=&quot;https://github.com/readme/nasa-ingenuity-helicopter&quot;&gt;Open Source on Mars: Community powers NASA‚Äôs Ingenuity Helicopter&lt;/a&gt;. Erg interessant om te lezen. NASA maakt dus gebruik van open source code. Waarschijnlijk worden &lt;em&gt;Flask&lt;/em&gt; en dus ook &lt;em&gt;Werkzeug&lt;/em&gt; gebruikt bij &lt;em&gt;ground control&lt;/em&gt; om de helicopter aan te sturen.&lt;/p&gt;

&lt;p&gt;In het stuk valt ook te lezen hoe men bepaald heeft welke software gebruikt werd voor het project. NASA heeft een lijst van componenten en hun versienummers aangeleverd aan GitHub, de centrale plek waar open source opgeslagen wordt.&lt;/p&gt;

&lt;p&gt;Omdat open source ontwikkeling zich in de openbaarheid voltrekt, kan elke wijziging in open source code gekoppeld worden aan een identiteit. De lijst van componenten en hun versienummers levert dan ook een √©√©nduidige lijst op van namen. Mijn wijziging is opgenomen in &lt;em&gt;Werkzeug versie 0.14&lt;/em&gt; en voor Ingenuity wordt versie 0.16 gebruikt. Inmiddels is versie 2.0.0 net uit. Degene die aan versies na 0.16 hebben bijgedragen worden derhalve niet genoemd bij de ‚Äúachievement‚Äù. Maar wellicht wordt deze code in toekomstige missies gebruikt.&lt;/p&gt;

&lt;p&gt;Ik vond het leuk om achter dit feit te komen, en uit te zoeken hoe het precies zit. En ik hoop in de toekomst nog aan andere projecten te kunnen bijdragen.&lt;/p&gt;

&lt;div class=&quot;postscript&quot;&gt;&lt;span&gt;Eerder gepubliceert&lt;/span&gt; als &lt;a href=&quot;https://www.archipunt.nl/archipunt-op-mars/&quot;&gt;Archipunt op Mars&lt;/a&gt;.&lt;/div&gt;


        </description>
        <pubDate>Wed, 08 Sep 2021 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/ict/2021/09/08/wat-heeft-archipunt-te-maken-met-de-ingenuity-mars-helicopter.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/ict/2021/09/08/wat-heeft-archipunt-te-maken-met-de-ingenuity-mars-helicopter.html</guid>
        <category>ICT</category>
      </item>
      <item>
        <title>One Closure Explanation</title>
        <description>
          &lt;p&gt;Closures in programming languages are pretty intuitive to use. Understand what they are is actually a bit more difficult.&lt;/p&gt;

&lt;p&gt;A closure is a function, but not a regular function. And to better understand closures, it helps me to understand regular functions. So first I explain how regular functions work. After that I‚Äôll make the connection to functional closures.&lt;/p&gt;

&lt;h2 id=&quot;regular-functions&quot;&gt;Regular functions&lt;/h2&gt;

&lt;p&gt;When you call a regular function, a lot of things are going on. Under the hood a stack-structure is used.
Things the function needs, like arguments and the return address, get pushed up this stack. This is a bit of a simplification. There are optimising compilers, but I want explain the principle here. If you want to delve into the nitty-gritty details, please checkout &lt;a href=&quot;https://en.wikipedia.org/wiki/Calling_convention&quot;&gt;calling conventions&lt;/a&gt; on Wikipedia.&lt;/p&gt;

&lt;p&gt;So how does this work, what gets pushed up our stack-for-algorithmic-purposes? Let‚Äôs explain this with a JavaScript example.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1: function test(a, b) {
2: 	var c = a + b;
3: 	console.info(&apos;The sum of %s + %s is %s&apos;, a, b, c);
4: }
5: test(1, 2);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The program runs the following steps.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Before calling &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test&lt;/code&gt;, the return address is pushed onto the stack. With this info, the function knows where to ‚Äúreturn‚Äù to. So let‚Äôs push the address of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;line 5&lt;/code&gt; onto the stack.&lt;/li&gt;
  &lt;li&gt;After that, the arguments &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2&lt;/code&gt; are pushed onto the stack. Now there are 3 items on the stack.&lt;/li&gt;
  &lt;li&gt;Now we actually can start running the function. This is done via a jump to the entry point of the function, like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;goto line 1&lt;/code&gt;. I will indent steps that are within the function call:
    &lt;ul&gt;
      &lt;li&gt;At line 1 there is nothing to do.&lt;/li&gt;
      &lt;li&gt;At line 2, there is some arithmetic, and the result is stored in the &lt;em&gt;local variable&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt;. Locals are stored on the stack too, so &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3&lt;/code&gt; will get pushed onto the stack, and we have 4 items on the stack.&lt;/li&gt;
      &lt;li&gt;Line 3 will print a line to the console, while referencing three items on the stack.&lt;/li&gt;
      &lt;li&gt;At line 4, the function returns. All local variables, arguments and return address are popped from the stack. The return address is used to jump back to (the end of) line 5.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;And at that point there is no more code to execute, and our program has finished running.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;At first glance this may seem a bit tedious and boring. Yet, some smart stuff is going on. When the function returned at line 4, all local variables, arguments and return address have been cleaned up. No need for &lt;em&gt;garbage collection&lt;/em&gt; or &lt;em&gt;reference counting&lt;/em&gt;. Very efficient.&lt;/p&gt;

&lt;p&gt;And it works pretty well when calling other functions or even with recursive calls. The stack-size is the limit! Only a stack-overflow comes after that, but that is about it.&lt;/p&gt;

&lt;p&gt;And yes, I left out handling return values, stack pointers and reference types. We do not need to worry about those for this explanation.&lt;/p&gt;

&lt;p&gt;To summarise: arguments and local variables live on the stack. They only exist between function entry and exit. In regular functions, that is.&lt;/p&gt;

&lt;h2 id=&quot;first-class-functions&quot;&gt;First class functions&lt;/h2&gt;

&lt;p&gt;Before we go to closures, it is important to know what &lt;em&gt;first class functions&lt;/em&gt; are. JavaScript has them, but what defines them? At first you might think &lt;em&gt;nesting functions&lt;/em&gt; is a property of first class functions, but it is not. Turbo Pascal &lt;a href=&quot;https://twitter.com/doekezanstra/status/1380426215757070336&quot;&gt;supports inner functions&lt;/a&gt;, yet it doesn‚Äôt have support for first class functions.&lt;/p&gt;

&lt;p&gt;When you can assign a function to a variable, the language supports functions as a first class citizen. It should be no different as assigning an integer or a string to a variable.&lt;/p&gt;

&lt;p&gt;And when you can assign a function to a variable, you also can pass them around to other functions. Or let functions &lt;em&gt;return&lt;/em&gt; functions or assign functions to data structures. This also seems reasonable, but Turbo Pascal can‚Äôt do this. For that one needs something extra.&lt;/p&gt;

&lt;h2 id=&quot;functional-closures&quot;&gt;Functional closures&lt;/h2&gt;

&lt;p&gt;So let us explore functional closures. By the way: &lt;em&gt;closure&lt;/em&gt;, &lt;em&gt;lexical closure&lt;/em&gt; or &lt;em&gt;function closure&lt;/em&gt;; all the same thing. Take the following example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function test_two(a, b) {
	var c = a + b;
	return function inner() {
		console.info(&apos;The sum of %s + %s is %s&apos;, a, b, c);
	}
}
var result = test_two(1, 2);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The function &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test_two&lt;/code&gt; returns a nested function, which is assigned to the variable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;result&lt;/code&gt;. So you would expect to execute the inner function by running &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;result()&lt;/code&gt;. And this indeed works in JavaScript.&lt;/p&gt;

&lt;p&gt;But, when you think of the stack-based system of regular functions, as described above, something is off. The stack-algorithm says when the function &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test_two&lt;/code&gt; returns, the arguments &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt; and variable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt; are popped from the stack, and would not be accessible anymore. A call to the inner function would refer to variables that don‚Äôt exist anymore!&lt;/p&gt;

&lt;p&gt;Functional closures solve this. I like to think of a closure as function with a shopping bag that contains all the variables (state) which are necessary to perform its function. So the variable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;result&lt;/code&gt; contains a reference to the function &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test_two&lt;/code&gt; together with a bag with values for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;When you would run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;var result2 = test_two(3, 4)&lt;/code&gt;, the variable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;result2&lt;/code&gt; will not contain the same thing as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;result&lt;/code&gt;. The reference to the function is the same, but this closure has its own bag of state.&lt;/p&gt;

&lt;p&gt;How exactly this is implemented is not important for my explanation. Different languages do implement this behaviour differently, but the principle is the same. I found some more &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures#closure_scope_chain&quot;&gt;technical info about JavaScript closures on MDN&lt;/a&gt;, and also a blog about &lt;a href=&quot;https://vkontech.com/the-intuitive-guide-to-understanding-closures-in-c/&quot;&gt;C# closures&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The Wikipedia article &lt;a href=&quot;https://en.wikipedia.org/wiki/Closure_(computer_programming)&quot;&gt;on closures&lt;/a&gt; has the line &lt;em&gt;‚ÄúOperationally, a closure is a record storing a function together with an environment.‚Äù&lt;/em&gt; in the introduction. That summarises the point of my explanation pretty well. I hope you now have a better understanding of closures. Let me know what you think.&lt;/p&gt;


        </description>
        <pubDate>Mon, 12 Apr 2021 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/ict/2021/04/12/a-closure-explanation.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/ict/2021/04/12/a-closure-explanation.html</guid>
        <category>ICT</category>
      </item>
      <item>
        <title>Building Another Blog Engine</title>
        <description>
          &lt;p&gt;I have some ideas for a blog engine I want to explore. Instead of creating a new website, I‚Äôm planning to make incremental changes/improvements to this website. Baby steps. That‚Äôs why I‚Äôve named this project BABE: Building Another Blog Engine.&lt;/p&gt;

&lt;p&gt;At the moment I‚Äôm using GitHub Pages for this blog. When I push a commit, GitHub schedules a task of transforming the source via Jekyll. And the resulting files live somewhere on a webserver. It‚Äôs convenient, but it doesn‚Äôt give me the control I need.&lt;/p&gt;

&lt;p&gt;Step one is to build the website local, and push the resulting files to GitHub. I don‚Äôt want to create another repository for the build result, as this adds confusion. Fortunate, &lt;em&gt;git&lt;/em&gt; has a nice solution for this. Create a branch for Jekyll‚Äôs build result, and tell GitHub Pages to serve the website from there.&lt;/p&gt;

&lt;p&gt;I‚Äôm using the branch feature in an unusual way: it is not intended for merging into the main branch. And this way, the published source doesn‚Äôt show up in my blog‚Äôs history.&lt;/p&gt;

&lt;p&gt;This branch should contain no files other than the build result. The obvious choice to do this would be to create a branch and remove all files. But why not use the powers of &lt;em&gt;git&lt;/em&gt; and create a branch from the initial commit, way in the past!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;initial_hash=$(git rev-list HEAD | tail -n 1)
git branch web-stek $initial_hash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We now have an (almost) empty branch. How do we get the output from Jekyll‚Äôs build command to this branch?&lt;/p&gt;

&lt;p&gt;One way might be by having the ignored folder &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site&lt;/code&gt; (which contains the Jekyll build result) on the &lt;em&gt;master&lt;/em&gt; branch. Somehow  bring the changes to the &lt;em&gt;web-stek&lt;/em&gt; branch by switching branches. That would work with new files, but I don‚Äôt know how to transfer &lt;em&gt;modified&lt;/em&gt; files this way.&lt;/p&gt;

&lt;p&gt;Two alternatives come to mind. Either use two &lt;em&gt;git&lt;/em&gt; repositories on the same machine in different folders. Or use an intermediate folder for Jekyll‚Äôs build result. For simplicity and less confusion, I‚Äôve chosen to work with an intermediate folder.&lt;/p&gt;

&lt;p&gt;In the example below, &lt;em&gt;rsync&lt;/em&gt; transfers the build result to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/docs&lt;/code&gt; folder instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/_site&lt;/code&gt;. I‚Äôve changed the name, because &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/_site&lt;/code&gt; is not listed with the settings for the &lt;a href=&quot;https://docs.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site&quot;&gt;publication source&lt;/a&gt; on GitHub Pages. So &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/docs&lt;/code&gt; it is. The build process works like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jekyll build --destination &quot;$jekyll_build&quot;
git checkout web-stek
rsync -av &quot;$jekyll_build&quot; ./docs/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To finish up, I need to add the folders &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.jekyll-cache&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.sass-cache&lt;/code&gt; to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt; file on the &lt;em&gt;web-stek&lt;/em&gt; branch. Also, some empty folders might be there, because git only works with actual files. Finally, you might want to remove the files from the initial commit in the branch.&lt;/p&gt;

&lt;p&gt;I compared the result in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/docs&lt;/code&gt; with GitHub‚Äôs copy by fetching the pages via &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wget -r https\://blog.zanstra.com&lt;/code&gt;. I only found one major difference. GitHub Pages would normalizes time-zone offsets to zero. That might be an issue for RSS readers, but I can live with it.&lt;/p&gt;

&lt;p&gt;So after pushing all this, and setting up the publication source you are good to go. The next step is to automate publishing, but that has to wait for an other time.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UPDATED 2021-04-06&lt;/strong&gt;: A bit mind-bending, but the &lt;em&gt;publication source&lt;/em&gt; is considered to be in Jekyll format. How I learned this? I wanted the folder &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.well-known&lt;/code&gt; to be copied to my website, but Jekyll ignored this file. Hidden files are on the ignore list. Luckily there is an easy fix. Add a file at the root of your site called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.nojekyll&lt;/code&gt;. The file can be empty.&lt;/p&gt;


        </description>
        <pubDate>Sun, 31 Jan 2021 00:00:00 +0100</pubDate>
        <link>https://blog.zanstra.com/2021/01/31/Building-Another-Blog-Engine.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2021/01/31/Building-Another-Blog-Engine.html</guid>
      </item>
      <item>
        <title>Moving away from Server.app to Jamf Pro</title>
        <description>
          &lt;p&gt;At &lt;a href=&quot;https://archipunt.nl&quot;&gt;Archipunt&lt;/a&gt; we manage around 100 &lt;em&gt;macOS&lt;/em&gt; computers. We used to manage them via &lt;em&gt;Server.app&lt;/em&gt;. Because of several reasons, we now are moving to an all-MDM solution with Jamf Pro.&lt;/p&gt;

&lt;p&gt;To migrate the computers, we identified the following things to be fixed on these computers:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The registration to Server.app‚Äôs &lt;em&gt;Network Account&lt;/em&gt; server needs to be removed&lt;/li&gt;
  &lt;li&gt;After this, some cleanup needs to be done in the computers local directory&lt;/li&gt;
  &lt;li&gt;Since password authentication was done via Server.app, the &lt;em&gt;mobile account&lt;/em&gt; need to be migrated to a &lt;em&gt;local account&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;Some computers used Server.app‚Äôs MDM solution. When still present, old profiles need to be removed&lt;/li&gt;
  &lt;li&gt;Most computers are registered via DEP, so enrolment needs to be renewed in order to configure the to be managed via Jamf Pro.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Because of COVID-19, most computers need to be migrated by the users themselves at home. Luckily, all users have elevated privileges. Otherwise, this migration would take a lot more time on our side.&lt;/p&gt;

&lt;p&gt;To migration will be done by a custom application. The GUI part will be written in AppleScript because it is so well suited for this. The actual migration is done via a shell-script. I couldn‚Äôt have written this without the &lt;a href=&quot;https://github.com/rtrouton/rtrouton_scripts/blob/master/rtrouton_scripts/migrate_ad_mobile_account_to_local_account/MigrateADMobileAccounttoLocalAccount.command&quot;&gt;this script by Rich Trouton&lt;/a&gt;: I made it work with Open Directory (which Server.app users), instead of Active Directory. Another post that helped enormously was this &lt;a href=&quot;https://www.reddit.com/r/macsysadmin/comments/c97zgf/removing_apsdkeychain_to_enroll_devices_in_dep/&quot;&gt;check and fix for an expired Apple Push Service Delivery certificate&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I designed the shell-script via a ‚Äúcheck-fix‚Äù strategy: I first check if something needs to be fixed, and if so, fix it. For example, first I check if the machine is linked to a network account server. If so, the link is disconnected. This way, the script can be run as often as one wants without breaking stuff. Most items about are coded via a check/fix pair. An added advantage is separate parts can easily be tested.&lt;/p&gt;

&lt;p&gt;It‚Äôs also handy in the case the machine has to be rebooted. After that, just run the script again, and it factually starts where it was before the computer was rebooted.&lt;/p&gt;

&lt;p&gt;The AppleScript front-end handles the start screen and the request for the elevated privileges. When an error occurs within the shell-script, the user is advised about this and the log file is shown in the finder. I reserved exit-code 199 via which the shell-script can tell AppleScript the computer needs to be rebooted.&lt;/p&gt;

&lt;p&gt;To test the AppleScript without running the actual migration shell-script, I used the user defaults system. By writing a key/value pair to the application bundle domain (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;defaults write  nl.archipunt.public.go-jamf-pro test -string &quot;PASS&quot;&lt;/code&gt;) the test-application‚Äôs behaviour can be influenced. When the key is not present, the actual migration code will be used.&lt;/p&gt;

&lt;p&gt;For source-code, please check out &lt;a href=&quot;https://bitbucket.org/archipunt/go-jamf-pro/src/master/&quot;&gt;the repository&lt;/a&gt; on bitbucket.&lt;/p&gt;

&lt;p&gt;About implementation: we first asked a small group of users to test the script, so we could detect common problems early and fix them. This worked very well. After errors from this initial group were fixed, most errors we experienced where plain user errors and could be handled via the phone very quickly.&lt;/p&gt;

&lt;p&gt;The hardest error to fix was a user who just didn‚Äôt get the enrolment notification. Turned out, the user accidentally had switched on &lt;em&gt;do not distrub&lt;/em&gt;. And also had no idea that option existed‚Ä¶&lt;/p&gt;


        </description>
        <pubDate>Mon, 11 Jan 2021 00:00:00 +0100</pubDate>
        <link>https://blog.zanstra.com/2021/01/11/go-jamf-pro.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2021/01/11/go-jamf-pro.html</guid>
      </item>
      <item>
        <title>Pretty Print JSON with a Twist</title>
        <description>
          &lt;p&gt;&lt;strong&gt;TLDR;&lt;/strong&gt; You can pretty print JSON in a &lt;em&gt;different manner&lt;/em&gt;. &lt;a href=&quot;https://zanstra.com/my/Json-pp.html&quot;&gt;Try it here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;My second programming language was Turbo Pascal (first one GW-Basic). From a BBS-pal I learned a notation in Pascal that has the &lt;em&gt;semicolon&lt;/em&gt; at the &lt;em&gt;start&lt;/em&gt; of the line, instead of at the end of the line, as most people did. Sometimes I still apply the same formatting to JSON.&lt;/p&gt;

&lt;p&gt;In this blog, I want to explore how such formatting can be done using Python and JavaScript. Just for the record: Pascal uses semicolons as statement &lt;em&gt;separator&lt;/em&gt;, where as languages like C use them as statement &lt;em&gt;terminator&lt;/em&gt;. JSON shares this behaviour with Pascal.&lt;/p&gt;

&lt;p&gt;To make clear what I want, here‚Äôs an example JSON file in the desired layout:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ &quot;type&quot;: &quot;pedant&quot;
, &quot;enabled&quot;: true
, &quot;tags&quot;:
  [ &quot;nag&quot;
  , &quot;prick&quot;
  , &quot;pin&quot;
  ]
, &quot;data&quot;:
  { &quot;test&quot;: 123
  , &quot;cooperate&quot;: null
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At first it looks pretty weird. However, there is an obvious advantage. You can visually follow the nesting-level of the data-structure in any editor. And you never place a comma too many.&lt;/p&gt;

&lt;p&gt;But &lt;strong&gt;&lt;em&gt;why&lt;/em&gt;&lt;/strong&gt; would one with a sane mind want to do this? Well, for starters because it is interesting. And also fight the orthodoxy. And it‚Äôs an ideal project to learn something new along the way.&lt;/p&gt;

&lt;p&gt;Anyways. Python‚Äôs json module provides a &lt;a href=&quot;https://docs.python.org/3.8/library/json.html#json.dump&quot;&gt;dump&lt;/a&gt;-method to convert a native data-structure to JSON:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import json
data = {&apos;type&apos;: &apos;pedant&apos;, &apos;enabled&apos;: True, &apos;tags&apos;: [&apos;nag&apos;, &apos;prick&apos;, &apos;pin&apos;], &apos;data&apos;: {&apos;test&apos;: 123, &apos;cooperate&apos;: None}}
json = json.dumps(data, indent=2)
print(json)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When you run this, it will print out the formatted JSON below.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;type&quot;: &quot;pedant&quot;,
  &quot;enabled&quot;: true,
  &quot;tags&quot;: [
    &quot;nag&quot;,
    &quot;prick&quot;,
    &quot;pin&quot;
  ],
  &quot;data&quot;: {
    &quot;test&quot;: 123,
    &quot;cooperate&quot;: null
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To better understand what‚Äôs happening, I visualized this formatting by adding colored borders.&lt;/p&gt;

&lt;html&gt;&lt;style&gt;
	.JSON { font: 15px/1.5 monospace; border:1px solid #e8e8e8; background:#f8f8f8; padding: 8px 12px; margin-bottom:15px; }
	.indent-color { border:1px solid blue;}
	.indent { border:1px solid blue; display:inline-block;width:3ex;height:1em;}
	.sep1 { border:1px solid green; white-space: pre}
	.sep2 { border:1px solid green; white-space: pre}
	.NL1-color { border:1px solid red;}
	.NL1 span:last-of-type { border-right:2px solid red;}
	/*.NL2 { border-left:2px solid orange;}*/
&lt;/style&gt;&lt;div class=&quot;JSON&quot;&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&quot;type&quot;&lt;span class=&quot;sep2&quot;&gt;: &lt;/span&gt;&quot;pedant&quot;&lt;span class=&quot;sep1&quot;&gt;, &lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&quot;enabled&quot;&lt;span class=&quot;sep2&quot;&gt;: &lt;/span&gt;true&lt;span class=&quot;sep1&quot;&gt;, &lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&quot;tags&quot;&lt;span class=&quot;sep2&quot;&gt;: &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&lt;span class=&quot;indent&quot;&gt; &lt;/span&gt;&quot;nag&quot;&lt;span class=&quot;sep1&quot;&gt;, &lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&lt;span class=&quot;indent&quot;&gt; &lt;/span&gt;&quot;prick&quot;&lt;span class=&quot;sep1&quot;&gt;, &lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&lt;span class=&quot;indent&quot;&gt; &lt;/span&gt;&lt;span&gt;&quot;pin&quot;&lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;]&lt;span class=&quot;sep1&quot;&gt;, &lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&quot;data&quot;&lt;span class=&quot;sep2&quot;&gt;: &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&lt;span class=&quot;indent&quot;&gt; &lt;/span&gt;&quot;test&quot;&lt;span class=&quot;sep2&quot;&gt;: &lt;/span&gt;123&lt;span class=&quot;sep1&quot;&gt;, &lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&lt;span class=&quot;indent&quot;&gt; &lt;/span&gt;&quot;cooperate&quot;&lt;span class=&quot;sep2&quot;&gt;: &lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span class=&quot;NL2 indent&quot;&gt; &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;
	&lt;div class=&quot;NL1&quot;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/html&gt;

&lt;p&gt;&lt;span class=&quot;indent-color&quot;&gt;blue&lt;/span&gt; Providing the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;indent&lt;/code&gt; argument will kick-off the pretty printing. A positive integer will indent that many spaces per level. If you provide a string, that value is being used per indent-level. In this example I specified two spaces.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;NL1-color&quot;&gt;red&lt;/span&gt; If &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;indent&lt;/code&gt; is specified, a newline will be inserted just before the indentation.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;sep1&quot;&gt;green&lt;/span&gt; You can also change the separator behavior. From the documentation: &lt;em&gt;‚ÄúIf specified, separators should be an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(item_separator, key_separator)&lt;/code&gt; tuple‚Äù&lt;/em&gt;. So by providing the tuple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(&apos;;&apos;, &apos;: &apos;)&lt;/code&gt; for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;separators&lt;/code&gt;, one could create &lt;em&gt;European JSON&lt;/em&gt;. Here I provide a semi-colon instead of a comma, which is obviously not valid JSON. So just be aware, you could produce invalid JSON with this option. However, when &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;indent&lt;/code&gt; is specified, the tuple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(&apos;, &apos;, &apos;: &apos;)&lt;/code&gt; is automatically used, adding spaces after both separators.&lt;/p&gt;

&lt;p&gt;So, these arguments were a bit of a disappointment. It didn‚Äôt seem possible to format the JSON the way I wanted it.&lt;/p&gt;

&lt;p&gt;However, the API provides another option. We could specify a custom &lt;a href=&quot;https://github.com/python/cpython/blob/3.8/Lib/json/encoder.py&quot;&gt;JSONEncoder&lt;/a&gt; subclass via the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cls&lt;/code&gt; argument (you can inspect the code I linked to). This class is heavily optimized and caters for all sorts of requirements. I made a copy of the code, and made some modifications. It just seemed like a lot of work. The code is not really designed for reuse (for example: encoding value types, like boolean, are duplicated multiple times), so I decided to take a different route to a solution at this time.&lt;/p&gt;

&lt;p&gt;Look at the color-coded JSON above. What if we replaced &lt;code&gt;&lt;span class=&quot;sep1&quot;&gt;comma&lt;/span&gt; &lt;span class=&quot;NL1-color&quot;&gt;newline&lt;/span&gt; &lt;span class=&quot;indent-color&quot;&gt;indent&lt;/span&gt;&lt;/code&gt; by &lt;code&gt;&lt;span class=&quot;NL1-color&quot;&gt;newline&lt;/span&gt; &lt;span class=&quot;indent-color&quot;&gt;indent&lt;/span&gt; &lt;span class=&quot;sep1&quot;&gt;comma&lt;/span&gt;&lt;/code&gt;? Yes, I‚Äôm talking string-replacement. Any newline in JSON can safely be recognized as whitespace, since newlines in strings are always encoded like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\n&lt;/code&gt; (or when reading code, the newline &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\n&lt;/code&gt; is encoded as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\\n&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;The only tweak we need is there should be a little bit indentation &lt;em&gt;after&lt;/em&gt; the comma (group &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\2&lt;/code&gt; in the code below). The remaining indentation should be placed &lt;em&gt;before&lt;/em&gt; the comma (group &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\1&lt;/code&gt;). For now, I assumed the indent to be two spaces. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;((?:  )*)&lt;/code&gt; construct is to see the two spaces as one ‚Äúthing‚Äù, so it could be matched multiple times. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?:&lt;/code&gt; makes sure it is not remembered as a match. I do want to match &lt;em&gt;multiples&lt;/em&gt; of two spaces here, hence the double parentheses.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import re
def my_json_pretty_print(json):
    return re.sub(r&apos;, *\n((?:  )*)(  )&apos;, r&apos;\n\1,\2&apos;, json)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;As a side-note&lt;/em&gt;: since this is a learning exercise, I tried to make the regular expression more readable by using &lt;a href=&quot;https://docs.python.org/3.8/library/re.html#re.X&quot;&gt;verbose regular expressions&lt;/a&gt;. The idea about it whitespace (not used in special ways) is ignored, so you can use multi-line strings. You also can add comments to parts of the regular expression. However, I intend to match whitespace, but I couldn‚Äôt get it working. And because I also didn‚Äôt think the regular expression was more readable this way, I abandoned it.&lt;/p&gt;

&lt;p&gt;If we combine the two code-snippets from above, we get the following output printed:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;type&quot;: &quot;pedant&quot;
,  &quot;enabled&quot;: true
,  &quot;tags&quot;: [
    &quot;nag&quot;
  ,  &quot;prick&quot;
  ,  &quot;pin&quot;
  ]
,  &quot;data&quot;: {
    &quot;test&quot;: 123
  ,  &quot;cooperate&quot;: null
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not bad. Not bad at all! When we compare this to the desired layout from above, we can note the following:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;There are two spaces between the comma and the object-properties, instead of one. I think this is not wrong, but one space would be nicer.&lt;/li&gt;
  &lt;li&gt;The opening object- and list-characters (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[&lt;/code&gt;) are followed by a newline. This needs to be addressed.&lt;/li&gt;
  &lt;li&gt;The closing characters (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;}&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;]&lt;/code&gt;) seem to be at the right place, so we are fine there.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;First thing I want to fix is to support all sorts of indentations, and not only hard coded two spaces. I figured it is best to define a new function, which will call &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;json.dumps&lt;/code&gt;, so there is only need to pass &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;indent&lt;/code&gt; once. Addressing the issue with the extra space in the indentation: this is caused by the comma that is also functioning as an indentation character. Basically I need to delete the first character of the last indent, marked visually by the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X&lt;/code&gt;: &lt;code&gt;&lt;span class=&quot;indent-color&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;indent-color&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;indent-color&quot;&gt;x&amp;nbsp;&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I played a bit with parameterizing the indentation into the regular expression. String concatenation looked terrible. Formatting with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.format()&lt;/code&gt; wasn‚Äôt a good match either, because curly braces are also special characters in regular expressions. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt;-style formatting (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%s&lt;/code&gt;) is a good alternative, while the regular expression stays readable.&lt;/p&gt;

&lt;p&gt;While playing with it, I discovered that the handling of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[&lt;/code&gt;- and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{&lt;/code&gt;-characters are the same the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;,&lt;/code&gt;-character, so I generalized the regex by changing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;,&lt;/code&gt; to a capturing group that matches all three characters, and add a back-reference to the replacement. The code now looks like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def json_stringify(obj, indent=2):
    if not isinstance(indent, str): indent = &apos; &apos; * indent
    result = json.dumps(obj, indent=indent)
    rx_indent = r&apos;([,{[]) *\n((?:%s)*)%s(%s)&apos; % (indent, indent[0], indent[1:])
    result = re.sub(rx_indent, r&apos;\n\2\1\3&apos;, result)
    # Special case: remove inserted newline with top-level array or object
    return result[1:] if result[0]==&apos;\n&apos; else result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, if we run the code now, we get this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ &quot;type&quot;: &quot;pedant&quot;
, &quot;enabled&quot;: true
, &quot;tags&quot;: 
  [ &quot;nag&quot;
  , &quot;prick&quot;
  , &quot;pin&quot;
  ]
, &quot;data&quot;: 
  { &quot;test&quot;: 123
  , &quot;cooperate&quot;: null
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is exactly how we want it. As always, there are some things to be desired:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Indentations with TAB-characters are not handled well. The code should only remove the first character of the last indent when it‚Äôs not a TAB-character.&lt;/li&gt;
  &lt;li&gt;Using regex special characters as indentation (like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt;) make the program fail: the indent-string should be converted to a valid regular expression string first.&lt;/li&gt;
  &lt;li&gt;The code fails when &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;indent=0&lt;/code&gt; with an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IndexError: string index out of range&lt;/code&gt; on the code &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;indent[0]&lt;/code&gt;. This is easy fixable by using slices, like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;indent[:1]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So that brings us to the following code:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def json_stringify(obj, indent=2):
    if not isinstance(indent, str):
        indent = &apos; &apos; * indent
    result = json.dumps(obj, indent=indent)
    r_indent=re.escape(indent)
    if indent[:1]==&apos;\t&apos;:
        r_indent0  = &apos;&apos;
        r_indent1N = re.escape(indent)
    else:
        r_indent0 = re.escape(indent[:1])
        r_indent1N = re.escape(indent[1:])
    rx_indent = r&apos;([,{[]) *\n((?:%s)*)%s(%s)&apos; % (r_indent, r_indent0, r_indent1N)
    result = re.sub(rx_indent, r&apos;\n\2\1\3&apos;, result)
    return result[1:] if result[:1]==&apos;\n&apos; else result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, that‚Äôs it. I made this code into a &lt;a href=&quot;https://gist.github.com/doekman/e6e942d03f9dee3e98c080b7a47cd04b&quot;&gt;shell script&lt;/a&gt;, so it can be run from the command line (don‚Äôt forget to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chmod +x&lt;/code&gt; it before you start it). So how does it perform?&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh
-rw-r--r--   1 doekman  staff   4,9M 22 sep 17:08 big_trello_export.json
-rwxr-xr-x   1 doekman  staff   705B 22 sep 17:10 json-pp.py
$ time ./json-pp.py &amp;lt; big_trello_export.json &amp;gt; big_test.json
real	0m0.849s
user	0m0.734s
sys	0m0.069s
$ ls -lh
-rw-r--r--  1 doekman  staff   7,3M 22 sep 17:11 big_test.json
-rw-r--r--  1 doekman  staff   4,9M 22 sep 17:08 big_trello_export.json
-rwxr-xr-x  1 doekman  staff   705B 22 sep 17:10 json-pp.py
$ 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not bad. Five megabytes within the second on my 2017 iMac. I expected worse. But to state the obvious: don‚Äôt use this in production.&lt;/p&gt;

&lt;p&gt;As I mentioned at the start: I couldn‚Äôt have ended this quest without back-porting this code to the &lt;a href=&quot;https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Global_Objects/Object/toSource&quot;&gt;origins of JSON&lt;/a&gt;. The advantage of string substitution: it can easily be converted to JavaScript.&lt;/p&gt;

&lt;p&gt;Converting the code to JavaScript was pretty straight-forward. Things worth mentioning:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;JavaScript now comes with build-in &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify&quot;&gt;JSON-methods&lt;/a&gt; (grandpa speaking)&lt;/li&gt;
  &lt;li&gt;I couldn‚Äôt find a native &lt;a href=&quot;https://docs.python.org/3.8/library/re.html#re.escape&quot;&gt;re_escape&lt;/a&gt; for JavaScript, so I used &lt;a href=&quot;https://github.com/doekman/base2/blob/1e2eb7fb10565db7e71d2b25780783627e0773dd/src/base2/js/String2.js&quot;&gt;Dean Edward‚Äôs rescape&lt;/a&gt; from the (now ancient) &lt;a href=&quot;https://code.google.com/archive/p/base2/&quot;&gt;base2-library&lt;/a&gt;. Substitutions in JavaScript are &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$1&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\1&lt;/code&gt; in Python&lt;/li&gt;
  &lt;li&gt;To generate 4 spaces, in Python you would write &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;4*&apos; &apos;&lt;/code&gt;. I couldn‚Äôt find the JavaScript equivalent first, so I used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;new Array(1+4).join(&apos; &apos;)&lt;/code&gt; but then I found out you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&apos; &apos;.repeat(4)&lt;/code&gt; in &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat#Browser_compatibility&quot;&gt;modern browsers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://es6-features.org/#StringInterpolation&quot;&gt;Template Literals&lt;/a&gt; are still &lt;a href=&quot;https://caniuse.com/mdn-javascript_grammar_template_literals_template_literal_revision&quot;&gt;a bit to new&lt;/a&gt; to use everywhere, so I implemented the regular expression with string concatenation&lt;/li&gt;
  &lt;li&gt;Python slices &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[1:2]&lt;/code&gt; are calls to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.substring(1,2)&lt;/code&gt; in JavaScript. Why can‚Äôt I remember this?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can try the &lt;a href=&quot;https://zanstra.com/my/Json-pp.html&quot;&gt;JavaScript version here&lt;/a&gt;. Thanks for reading!&lt;/p&gt;


        </description>
        <pubDate>Mon, 05 Oct 2020 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2020/10/05/Pretty-printing-JSON-with-a-twist.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2020/10/05/Pretty-printing-JSON-with-a-twist.html</guid>
      </item>
      <item>
        <title>Query Trello data with Postgres (JSON)</title>
        <description>
          &lt;p&gt;Recently, I was working on a project to automatically create Trello-cards via their API. To do that, I needed some &lt;em&gt;id&lt;/em&gt;-values from the Trello-board which are not shown in the user-interface. But where does one get these values?&lt;/p&gt;

&lt;p&gt;Glad you asked. Every Trello-board can be &lt;a href=&quot;https://help.trello.com/article/747-exporting-data-from-trello-1&quot;&gt;exported to JSON&lt;/a&gt;, and the values I was looking for are available in this export. However, &lt;em&gt;JSON&lt;/em&gt; gives you the data in one big piece of text. Wouldn‚Äôt it be handier to have it available as &lt;strong&gt;tabular data&lt;/strong&gt; in a database?&lt;/p&gt;

&lt;p&gt;So I created &lt;a href=&quot;https://github.com/doekman/postgres-with-trello&quot;&gt;this git-repository&lt;/a&gt; to do just that (you will need the &lt;a href=&quot;https://www.postgresql.org&quot;&gt;Postgres&lt;/a&gt;-database for this).&lt;/p&gt;

&lt;p&gt;The table in which the JSON is stored, is modelled after an &lt;a href=&quot;https://rob.conery.io/2015/02/28/document-storage-gymnastics-in-postgres/&quot; title=&quot;Don&apos;t forget to click on the POSTGRES-tag on his site, listing a lot of interesting posts...&quot;&gt;idea of Rob Conery&lt;/a&gt; which basically is: store the JSON in a column, along with another column that uniquely identifies the document. This unique value is also available within the JSON itself.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;id, json
12, &apos;{&quot;id&quot;:12, &quot;other&quot;:&quot;data&quot;}
13, &apos;{&quot;id&quot;:13, &quot;other&quot;:&quot;info&quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The actual table definition is different, but you get the idea. And don‚Äôt worry about storing the id-value twice: this small abstraction will make your life a bit easier.&lt;/p&gt;

&lt;p&gt;On top of this document table, I created views for most used objects, like &lt;em&gt;cards&lt;/em&gt; and &lt;em&gt;lists&lt;/em&gt;. The pretty simple idea of ‚Äúviews on top of json‚Äù is pretty powerful. You get a lot of &lt;strong&gt;bang for your buck&lt;/strong&gt;!&lt;/p&gt;

&lt;p&gt;If you‚Äôre on a Mac, &lt;a href=&quot;https://postgresapp.com&quot;&gt;Postgres.app&lt;/a&gt; is the easiest way to setup a database, but &lt;a href=&quot;https://brew.sh&quot;&gt;Homebrew&lt;/a&gt; works fine too. As client, I use &lt;a href=&quot;https://eggerapps.at/postico/&quot;&gt;Postico&lt;/a&gt; which I really like a lot.&lt;/p&gt;

&lt;p&gt;So if you have a postgres database setup, and have cloned the &lt;a href=&quot;https://github.com/doekman/postgres-with-trello&quot;&gt;git project&lt;/a&gt;, it‚Äôs easy to create the database object via the terminal by typing:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;make trello
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;trello&lt;/code&gt; schema and within the schema the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document&lt;/code&gt; table in which the json will be loaded and a bunch of views. I‚Äôve included a Trello export file, so you can load it by running the following command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tool/loaddoc.sh data/simple_board_v1.json
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;loaddoc&lt;/code&gt; inserts the JSON-document in the database, unless it already exists. In that case it will update the row. To aid this &lt;em&gt;upsert&lt;/em&gt; behaviour, I‚Äôve added a &lt;em&gt;trigger&lt;/em&gt; to the database schema that updates the id-column. Ideally, this would be handled by the tool itself. However: this is a minimum-imlementation. I couldn‚Äôt find anything to load json into the database from the command line.&lt;/p&gt;

&lt;p&gt;A note about the id-column. Trello uses hexadecimal identifiers of 24 positions. That‚Äôs easy for computers, but a little harder for humans. So to ease filtering the views, I‚Äôve added an integer-column with auto-numbering.&lt;/p&gt;

&lt;p&gt;Below the screenshot showing the result in Postico with &lt;a href=&quot;https://trello.com/b/ZWvFVK9Z/postgres-with-trello&quot;&gt;this Trello-board&lt;/a&gt; loaded; the same one as we just loaded. On the left you see the table and views. Above I‚Äôve applied a filter, so I only see the lists from the first JSON document. All columns are type-cast. When you hover the image, the right pane is shown which also show type information.&lt;/p&gt;

&lt;html&gt;
	&lt;figure tabindex=&quot;0&quot;&gt;
		&lt;img src=&quot;/images/2020-03/Query-trello-json-with-postgres_A.png&quot; alt=&quot;Screen-shot of the Postico application&quot; class=&quot;non_hoover&quot; /&gt;
		&lt;img src=&quot;/images/2020-03/Query-trello-json-with-postgres_B.png&quot; alt=&quot;Screen-shot of the Postico application, with right pane&quot; class=&quot;hoover&quot; /&gt;
		&lt;figcaption&gt;
			The trello_list-view, with a filter applied &lt;span class=&quot;non_print comment&quot;&gt;(mouseover to display right pane)&lt;/span&gt;
		&lt;/figcaption&gt;
	&lt;/figure&gt;
&lt;/html&gt;

&lt;p&gt;Since I talked a lot about tooling: when you run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cat .ok&lt;/code&gt; on the command line, you will find some often used commands on your screen. It‚Äôs called an &lt;em&gt;ok-profile&lt;/em&gt;. The &lt;a href=&quot;https://github.com/secretGeek/ok-bash&quot;&gt;ok-bash&lt;/a&gt;-tool will make it easier to work with this. It also makes you smarter and more efficient.&lt;/p&gt;

&lt;p&gt;So if you develop for Trello, you should really &lt;a href=&quot;https://github.com/doekman/postgres-with-trello&quot;&gt;give this a try&lt;/a&gt;. And if you are working with JSON documents from other origins, I‚Äôm very much interested in your ideas.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Originally published &lt;a href=&quot;https://gist.github.com/doekman/e9b1530f0150822b464c4f7b0262a4f3&quot;&gt;at this gist&lt;/a&gt; on GitHub.&lt;/p&gt;

        </description>
        <pubDate>Fri, 03 Apr 2020 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2020/04/03/query-trello-json-with-postgres.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2020/04/03/query-trello-json-with-postgres.html</guid>
      </item>
      <item>
        <title>ok-bash and Python on macOS</title>
        <description>
          &lt;p&gt;Development on &lt;a href=&quot;https://www.python.org/doc/sunset-python-2/&quot;&gt;Python 2 has been stopped&lt;/a&gt;, and the default availability of Python on macOS &lt;a href=&quot;https://developer.apple.com/documentation/macos_release_notes/macos_catalina_10_15_release_notes#3318257&quot;&gt;will be deprecated&lt;/a&gt; anywhere in the nearby future. Last week, &lt;a href=&quot;https://scriptingosx.com/2020/02/wrangling-pythons/&quot;&gt;Scripting OS X&lt;/a&gt; wrote about how to deal with this from an admin-perspective.&lt;/p&gt;

&lt;p&gt;Here I would like to explain how we deal with this from the perspective of a small but very handy tool called &lt;a href=&quot;https://github.com/secretGeek/ok-bash&quot;&gt;ok-bash&lt;/a&gt;. This nifty tool helps you free brainspace by creating &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.ok&lt;/code&gt;-folder profiles for bash. You should check it out: it really makes you smarter and more efficient.&lt;/p&gt;

&lt;p&gt;Since the default availability of Python on macOS is threatened, this article is written from a macOS point of view. But the tool itself works on all systems that run &lt;em&gt;bash&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The tool is exposed via a bash-function, with a Python-backend helping with more complex tasks like syntax highlighting and other formatting. We need a bash-frontend, so the tool can work in the current shell environment.&lt;/p&gt;

&lt;p&gt;We want to keep installation of &lt;em&gt;ok-bash&lt;/em&gt; simple, so users can just clone the git-repository and initialize it via the shell startup file.&lt;/p&gt;

&lt;p&gt;Since there are so many ways to manage Python, we decided to resolve the used python-binary that‚Äôs within the current &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PATH&lt;/code&gt;. This is termined via the command &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;which python3 || which python&lt;/code&gt;, so Python 3 is used when available (the Python-backend works both in versions 2 and 3). Also, when only Python 2 is available (or if Python 3 is symlinked to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python&lt;/code&gt;), ok-bash still works.&lt;/p&gt;

&lt;p&gt;It‚Äôs also possible to manually override the path to Python, by setting an environment variable.&lt;/p&gt;

&lt;p&gt;In the future, ensuring Python‚Äôs availability can be done via a &lt;a href=&quot;https://docs.brew.sh/Homebrew-and-Python&quot;&gt;homebrew recipe&lt;/a&gt;. An extra advantage of homebrew is it supports the use of virtual environments.&lt;/p&gt;


        </description>
        <pubDate>Mon, 17 Feb 2020 00:00:00 +0100</pubDate>
        <link>https://blog.zanstra.com/2020/02/17/ok-bash-and-python.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2020/02/17/ok-bash-and-python.html</guid>
      </item>
      <item>
        <title>To the Point</title>
        <description>
          &lt;p&gt;Already two internet aeons ago, &lt;em&gt;secretGeek&lt;/em&gt; came up with some &lt;a href=&quot;http://secretgeek.net/up_up_up&quot;&gt;handy bash-aliases&lt;/a&gt; to ease navigating the folder hierarchy:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;alias ..=&apos;cd ..&apos;
alias ...=&apos;cd ../..&apos;
#and so on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Two dots plus an enter navigate you one directory down¬π, three dots do that twice, and so on. However, a single dot doesn‚Äôt go anywhere and gives you rudely some error message. No help there:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ .
-bash: .: filename argument required
.: usage: . filename [arguments]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Turns out the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.&lt;/code&gt; is a &lt;a href=&quot;https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#Bourne-Shell-Builtins&quot;&gt;shell buildin command&lt;/a&gt; that requires at least a filename as an argument. How rude.&lt;/p&gt;

&lt;p&gt;Wouldn‚Äôt it be handy and appropriate to print the current path when no argument is given? In that case, you could try adding the following to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.profile&lt;/code&gt; or equivalent startup file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function . { if [[ $# -eq 0 ]]; then pwd; else source &quot;$@&quot;; fi }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now a single dot will be more polite and will show the current path. Used with arguments, it works like before. So you still can use it to source scripts, like &lt;a href=&quot;https://github.com/secretGeek/ok-bash/&quot;&gt;ok-bash&lt;/a&gt;.&lt;/p&gt;

&lt;p style=&quot;margin-top:4em&quot;&gt;
	&lt;small&gt;
		¬π) I&apos;ve been told a hierarchy of folders/directories is a tree structure. When navigating into a folder, like &lt;code&gt;cd some_folder&lt;/code&gt;, to my earnest knowledge one moves up. Branches mostly grow to the light where the sun is, which is up in the sky. So if you go back from said folder with &lt;code&gt;cd ..&lt;/code&gt; one would move down. So secretGeek&apos;s aliases better be called &lt;code&gt;down_down_down&lt;/code&gt; but maybe that has a less engaging ring to it.  Also: the base of the hierarchy ‚Äîone could go there with &lt;code&gt;cd /&lt;/code&gt;‚Äî is called the root, which is a kind of odd, because the root is as branched as the part of the tree that grows in the air. And at the file system, it&apos;s only one place! Anyways, the proposed function neither goes up nor down, so at least we have no confusion there.
	&lt;/small&gt;
&lt;/p&gt;

        </description>
        <pubDate>Wed, 02 Oct 2019 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2019/10/02/To-the-point.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2019/10/02/To-the-point.html</guid>
        <category>cli</category>
      </item>
      <item>
        <title>NetNewsWire 5.0 released</title>
        <description>
          &lt;p&gt;From the &lt;a href=&quot;https://github.com/brentsimmons/NetNewsWire/blob/master/Technotes/CodingGuidelines.md#version-control&quot;&gt;Coding Guidelines&lt;/a&gt; of NetNewsWire:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Version Control&lt;/strong&gt;&lt;br /&gt;
Every commit message should begin with a present-tense verb&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;2017&quot;&gt;2017&lt;/h2&gt;
&lt;p&gt;Initial Add Add Add Add Remove Add Add Add Add Add Add Add Add Fix Make Add Unbreak Add Add Add Add Add Add Add Add Add Add Add Delete Add Remove Drop Add Add Add Add Add Add Comment Allow Put Make Update Make Show Wire Avoid Replace Add Add Ignore Add Write Update Remove Merge Generate Merge I Merge.&lt;/p&gt;

&lt;p&gt;Provide If Add Merge Fix Merge Fix Merge Merge Update Merge Use Use Start Create Start Extract Start Make Make Get Start Add Turn Add Add Move Fix Add Add.&lt;/p&gt;

&lt;p&gt;Commit Continue Move Add Work Continue Continue Delete Convert Convert Convert Convert Convert Remove Converrt Add Replace Set Begin Move Remove Set Continue Add Back Make Start Make Make I Rename Give Start Continue Create Add Make Do.&lt;/p&gt;

&lt;p&gt;Get Make Get Attach Progress Make More Continue Make LookupTable. Using Yet More Merge Remove Start Checking Added Start Progress Make Finish Make Turn Make Decide Progress Make Fix Make Create Make Delete Progress. Implement Start.&lt;/p&gt;

&lt;p&gt;Implement Create Make Make Make Make Continue Continue Make Continue Deal Get Make Use Call Add Delete Fix Make Marked Use Make Make Update Fix Make Rename Remove Add Prune Switch Save Update Move Merge Fix Update Merge Remove Update Move Update Fix Create Slightly Cache Use Delete Implement Update Update Make Update Move Create Delete Fix Get Move Delete Replace Continue Fix Continue Continue Continue Continue Continue Make Get Make Continue Continue Start Use Create Switch Simplify Update Start Remove Start Rename Do Move Make Fix Start Start Make Init Make Fix Make Init Fix Perform Edit Add.&lt;/p&gt;

&lt;p&gt;Make Fix Fix Fix Fix Fix Fix Create Move Remove Make Create Make Rewrite Use Fix Fix Remove Require Add Use Use Send Move Update Keep Update Create Make Call Save Fix Avoid Avoid Set Set Simplify Save Comment-out Add Remove Update Update Include Fix Update Refactor Avoid Handle Handle Rename Update Use Show Make Add Implement Show Update Make Fix Create Update Update Define Handle Make Update Differentiate Add Use Removed Update Change Make Make Post Rejigger Send Rewrite Use Update Move Make Fix Update Maintain Update Update Start Create Switch Begin Clear Rename Update Move Fix Edit Put.&lt;/p&gt;

&lt;p&gt;Flesh Craete Fix Create Start Do Start Fix Move Move Read Show Use Use Make Make Make Upgrade Upgrade Upgrade Upgrade Fix Make Switch Make Add Display When Mark Use Add Add Add Add Create Write Allow Write Check Add Remove Calculate Draw Close Start Show Draw Create Add Show Change Add Add Merge Rename Add Post Make Make Run Move Update Add Show Add Remove Add Skip Add Bump Add Add Change Add Change Bump Use Lighten Switch Set Decode Add Expand Set Bump Create Fix Use Create Add Add Add Add Fix Create Treat Update Make Use Add Delete Create Move Implement Remove Bump Switch Disallow Save Start Save Save Create Create Make Create Make Make Bump Make Update Set Darken Create Create Switch Create Make Make Replace Fix Make Create Make Use Fix Implement Use Update Show Return Add Bump Update Check Add Fix Fix Put Note Edit Avoid Log Normalize Print Log Simplify Log Add Start Adjust Pull Add Use Rebuild Add Fix Keep Add Make Parse Get Add Start Add Add Prefer Bump Add Add Add Fix Do Don‚Äôt Add Hide Add.&lt;/p&gt;

&lt;p&gt;Avoid Update Update Bump Fix Save Use Make Start Add Fix Get Add Add Use Bind When Create Delete Fix Do Increase Fetch Set Show Create Refresh Make Use Update Merge Update Add Start Add Fix Continue Make Define Make Create Make Create Create Parse Fix Base Cache Update Clean Fix Remove Remove Get Increase Add Create Create Remove Remove Remove Add Add Add Make Use Add Draw Skip Add Delete Reuse Parse Remove Bump Update Merge Add Save Refresh Parse Make Add Prefer Test Add Support Add Parse Add Add Make Add Add Fix Add Add Add Add Make Implement Add Style Display Normalized Continue Progress Make Edit Implement Position Bump Update Add Add Update Fix Add Add Link Add Add Add Fix Add Add Fix Add Continue Add Fix Update Use Merge Set Add Merge Update Update Move Implement Merge Clean Move Validate Add Use Use Remove Merge Simplify Return Validate Popup Add Remove Create Improve Set Start Don‚Äôt Set Use Use Bump Remove Update Implement Go Add Use Make Bump Update Remove Remove Create Merge Make Continue Continue Show Update Add Update Fix Show Use Put Add Fix Use Update Add Add Show Make Fix Comment Bump Update Freeze Fix Make Show.&lt;/p&gt;

&lt;h2 id=&quot;2018&quot;&gt;2018&lt;/h2&gt;
&lt;p&gt;Move Move Add Show Fix Check Use Update Make Make Turn Create Remove Draw Add move Merge Merge, Bump Increase Make Start Check Remove Merge Make Decrease Make Update Continue basic Merge revert Merge Make Add Use Add Switch Make User Use Fix Increase Add Bump Change Update Update Add Add Create Add Make Use Use Bump Update Make Unbreak Create Scripting Merge Add revert Merge Add Remove Layout Create Create Make Continue Keep Adjust Remove Reopen Open Restore Hide Display Continue Increase Continue Set Share Create Send Extend Make Add Revise Refer Move Add Handle Use Update Merge Scripting revert Add Merge Remove Download Switch Remove Remove Back Use Remove Add Add Set Make Add Add Add Add Validate Set Merge Consider Register Merge Re-sort Create Build Add Add Create Change It Accept Remove Sender Merge Merge Merge.&lt;/p&gt;

&lt;p&gt;Merge convert Merge Merge Start Merge Create Layout Change Add Wire Try Disable Make Delete Remake Make Remove Continue Get Add Add Move Make Remove Bump Update Reorder Remove Create Merge Merge Remove Show Make Show Change Update Restore implement Merge Merge Start Add Merge Add Pass Rearrange Add Use Add Create Add Make Add Add Remove Fetch support Merge Merge Fetch Rename Bump Update Remove Skip Make Remember Fix Make Skip Disallow Punt Make Create Implement Support Add Start Make Support Make Remove Update Bump Update When Skip Make Add Do Merge Hide When Make Update Make Create Delete Remove Add Add Use Use Use Remove Remove Use Create Use Create Use Don‚Äôt Use Add Remove Create Move Remove Move Move Fix Remove Move Darken Do Start Show Skip Add Mark Release Make Remove Rewrite Define Tweak Bump Update Give Tweak Draw Show Make Update Merge Switch Remove Create Add Turn Reenable Make Add Use Make Don‚Äôt Don‚Äôt Remove Replace Make support Remove Start Continue Use Fix Turn Reduce Lower Lighten Tweak Add Skip Make Turn Fix Match Adjust Use Make Turn Revert Hide Fix Make Make Deal Rebuild Bump Update Force Draw Reduce Save Bump Update Start Clean.&lt;/p&gt;

&lt;p&gt;Support Merge revert Reset Merge Merge.&lt;/p&gt;

&lt;p&gt;Add Merge add Merge better.&lt;/p&gt;

&lt;p&gt;Merge Add Merge.&lt;/p&gt;

&lt;p&gt;Add Remove Break Break Break Break Break First Merge use Break Break Rename Rename Add Add Add Add Build Update.&lt;/p&gt;

&lt;p&gt;Add Get Get Make Add Use Nuke Fix Remove Remove Remove Use Update Merge Really Use Use Make Submodule Remove Submodule Start RSDatabase Remove Rename Move Delete Remove Include.&lt;/p&gt;

&lt;p&gt;Update Add Unbreak Merge Oops Merge Add I Change Merge Fix Changes Merge Simplify Update Fix Use Unignore Use Use Use Use Update Use Update Use Use Use Use Use Use Use Use Use Update Update Update Add Update Update Use Update Merge Finish Use &lt;strong&gt;üéâ&lt;a href=&quot;https://inessential.com/2018/08/31/netnewswire_comes_home&quot; title=&quot;Celebrate&quot;&gt;Start&lt;/a&gt; &lt;a href=&quot;https://inessential.com/2018/08/31/netnewswire_comes_home&quot; title=&quot;Celebrate&quot;&gt;Continue&lt;/a&gt;üè°&lt;/strong&gt; Update Update Revise Merge.&lt;/p&gt;

&lt;p&gt;Removed Rename Update Change Use Use Merge Switch Merge Merge Hide Allow Normalize Normalize Fix Make Update Stop Merge Don‚Äôt Rename Add Update Add Update Start Keep Use Merge Merge Manually Add Bump Bump Hide Add Add Fixed Fix Merge Merge Don‚Äôt Merge Removed Fixed Merge Merge Update Update Change Changed fixed Merge Added Merge Remove Update Bump Update Enabled Merge Enabled Merge Bump Fix Print Fix Give Update Implemented Start Update Rolledback Enabled Changed Enabled Stop Update Update Stop Give Store Stop Merge Don‚Äôt Write Merge Merge Changed Added Merge Merge Save Merge Store Store Make Store Store Store Store Skip Write Added On Remove Stop Delete Remove Made Update Skip Merge Modified Updated Disallow Include Register Create Made Made Remove Start Make Refactor Merge Normalize Register Validate Add Accept Make Get Validate Make Added Added Sorted Redo Start Improve Merge Merge Merge 5.0d7. Update Temporarily Fix Include Merge.&lt;/p&gt;

&lt;p&gt;Update Continue Complete Fix Similar Merge Merge.&lt;/p&gt;

&lt;p&gt;Remove Update Re-enable Make Allow Update Make Update Increment Install Clean Update Update Update.&lt;/p&gt;

&lt;p&gt;Clean Update Merge Add Add Make Override Use Enable Add Add Update Update Get Do Disable Update Move Add Remove Add Remove Start Continue Make Remove Add Remove Add Use Rename Remove Make Move Fix Remove Remove Remove Make Add Add Add Add Make Make Add Remove.&lt;/p&gt;

&lt;h2 id=&quot;2019&quot;&gt;2019&lt;/h2&gt;
&lt;p&gt;changed Merge added Merge Start Merge Send Add Fix Update Run Don‚Äôt Start Add Add Add Update Update Add Fix Update Bind Add Switch Keep Update Update Fix Set Bump Close Add Bind Refresh Check Add Fix Switch Update Remove Enable Update Make Bump Tighten Reduce Further Update Bump.&lt;/p&gt;

&lt;p&gt;Moving Remove Updates Update Re-sort Restore Make Set Start Update Refresh Bump Drop Update Use Make Add Implement Add Implement Bump added Merge Don‚Äôt Don‚Äôt Update Make Allow Queue Do Remove Remove Remove Skip Fix Fix Discard Bump Update Skip Stop Update Remove Remove Remove Remove Remove Fix Merge Move Merge Remove Get Delete Delete Simplify Simplify Simplify Rationalize Import Start Make Update Quiet Merge Create Update Remove Move Make Remove Make Place Move Create Add Start Start Differentiate Merge Change Fix Merge Work Merge Make Continue Start Continue Remove Make Make Continue Rewire Fix Merge. Update Make Remove Remove Make Update Make Update Update Implement Make Add Index Update Revise Create Show Add Update Remove Revert Bump.&lt;/p&gt;

&lt;p&gt;Implemented added Use Remove Get Remove Remove Create Made Recalculate Merge Merge Remove Comment-out Rolled Merge Updated Merge Switch Merge Made Merge updated Merge made Merge add Merge Change Document Delete Create Update Continue Add Import Pull Change Remove Start Continue Update Make Make Skip Remove Remove Perform Do Give Pay Start Update Continue Make Make Move Finish Continue Continue Update Merge Store Update Convert Convert Post Convert Convert.&lt;/p&gt;

&lt;p&gt;Remove Set Drop Merge Remove Removed Create Merge Updated Remove Remove Remove Remove Merge Made updated Changed Updated Use Remove Remove Remove Remove Remove Remove Update Move Fixed Merge Remove Merge Delete Fix Move Move Remove Remove Major Move set Added updated Remove Work Start Update Save Update Take Made updated Added added Added adding Merge cleared Attempted Design Removed Merge Added Fixed Combined Combined Fixed Implemented Implemented Updated Group Merge Update Update Update Update Merge Updated Established Adjusted Fixed Fixed Changed Cleaned Fixed Added Added Made Added Reduced Fixed Implemented Refactored Made Added Changed Renamed Added Made Implemented Add Remove Add Update Start Create Switch Change Fix Implement Make Fix updated Update Fix Remove Tweak Fixed Change Revise Merge Removed Restored Fix Change Prevent Create Change Update implement Move Change Refactor Encapsulate Implement Add Finish Hide Move Prevent Fix Removed Hide Change Add Implement Fix Make Make Skip Remove Change Add Rename Make Change Add Refactor Enable Comment Implement Change updated Fix Add Implement Updated Add Add Prevent Add Rework Update Change Remove Add Rollback Enable Add Added Made Remove Change Add Enable Tweak Add Add Change Tweak Hack Provide Delete Rename implement Fix Fix Force Fix Made Deselect Deleted Align Make Respond Fix Align Change Slightly Increase Changed Use Add Merge Update Add Merge Add Add Merge Add Change Merge Change Create Change Fix Merge Refer Implement Make Made Merge Set Add Fix Add Fix Reuse Merge Write Add Make Merge.&lt;/p&gt;

&lt;p&gt;Rename Add Add Make Rename Rename Add Load Enable Delete Refine Make Make Prevent Implement Make Make Add Implement Implement Tweak Expand Prevent Show Update Updated validate Make Update Made change Add Add refactor Upgraded Pass Modify Rename Add Add Update Fix update make Add Added Fix Add Change Add Save added Add Keep Add Add Add added Update Add Fix Add Update Add Change Use Add Capture Refactor Add Restrict Move add store make Make Place Make Added Change Delete Set Change Add Put Stub Make Speed Use Set Update Merge Add Save Add Fix Delegate Make Save Change Scale Add Add Fix Upgraded Fix Fix Removed Fix Restore Update Add Start Update Add Add Add Rename Add Align Switch Prevent Retrieve Add Fix Scale Merge Update Show Fixed Disable Merge Move Make Remove Remove Add Disable Merge Remove Rename Dismiss Don‚Äôt Removed Disable Don‚Äôt Dismiss Rename Updated Improved Further Made Add Made Updated Set Add Moved Always Made Merge Allow Update Decrement Simplify Increase Merge Add Add Merge Make Make Updated Implement Make Make Remember Fix Update Remember Add Remember Make Update Update Send Fix Enhance Use Change Merge Remove Correct Use Cleaned Left Improved Removed UI Show Centered Merge Made Fixed Use Update Add Update Remove Update Merge Reformat Remove Add Set Merge Update Merge Correct Update Add Fixed Change Add Wrap Update Update Tweak Revise Add Fix Fix Add Tweak Change Make Update Change Merge Allow Enable Updated Updated Merge Refactor Correct Remove Google Use Point Enable Prevent Remove Handle Enforce Update Authentication Update Merge Rework Enable Corrected Remove Correct Refactor Rename Rename Add Ensure Modify Enable Handle Decoding Refactor Update Validate Fix Clear Remove Make Merge Merge Update Update Remove Provide Made Bump Update Fix.&lt;/p&gt;

&lt;p&gt;Cleanup Cleanup Add Make Pop Add Prevent Fix Fix Fix Ensure Fix Remove Fix Move Revert Fixed Merge Resolved Fix Merge Fix escape Fix Merge NetNewsWire upgraded Fix Changed Add Update Make Updated Updated Change Request Show add Merge Update Update Unread Mark Convert Make Add Update Add Fix Dismiss Merge Added Merge Updated Revert Add Added Updated Updated Marking moved Add Use fixed Refactor adding trying fix Merge Add Merge adjusted Made Made Refactor Add Correct Add Update center add Add Merge Revert Add Added Merge Fixes Merge Need Updated Add Merge Merge submodules Merge Move Subscribing Rename Port Add Merge Opens Update Update Update Merge Move Add Add Disbale removed Merge Merge FIrst Change use Fixed Wiring Code Begin Update Update Only Update Merge Update Remove Skip Use Merge Merge Change Move Update Implement Cleanup Merge Merge Adds Merge Renamed Merge Updated some Merge Merge Merge Merge Renamed restores restores Restrict Corrects Merge Merge Changed Switches Adds Switches Rebrand Merge Update Ensure Reduce Update Make Support Low Set SF Merge SF Rolls Deletes Merge Implement Merge Retrieve Temporarily Move Force Navigate Correct Fix Fix Removed Move Temporally Add Change Rename Fix.&lt;/p&gt;

&lt;p&gt;Move Run Merge Update Add Encapsulate Move Move Move Remove Change Merge Write Update Update Make Update Add Note Remove Update Merge Update Make Merge Use Update Update Update Mark Make Merge Remove Make Delete Make Make Make Make Make Make Merge Update Use Update Merge Create Merge Merge Add Merge Add fiddle Merge Merge Use Merge Create Merge Updated Use Remove Merge Merge Create Merge Create Create Make Merge Create merge Merge Add Prevent Added Add Fix Hook Change Show Fix Initial Fix Merge Make Merge Help Remove Merge Remove Automatically Rename Change Merge Show Merge In Restore Merge Remove Merge Merge Make Merge Remove Trying Get Merge make Merge rename CLean Skip Merge Integrate Check Merge Merge Merge revert Revert Try Exempt Merge Helpbook: Merge Add Merge Prevent Merge fix Fix fix Merge Merge.&lt;/p&gt;

&lt;p&gt;Merge Refactor Make Add Remove Implemented Correctly Adjust Correct The Merge Merge Replace Merge Fix Fix Fix Remove Merge Made Keep Fix Wire Merge Fix Merge Enable Add Merge Fix Deleted Made Remove Fix Fix Merge Reformat Merge Refactor Fix Change Reenable Correct Removed Fix Fix Fix Helpbook: Merge Remove Merge Help Merge Change Merge Merge fix undo Bump Merge Add, Merge Merge Update Fix Merge Bump Merge Use Merge Break Merge Update Add Add Get Update Merge Bump Merge Update Bump Merge Now Merge Update Fix Rearrange Add Add Add Add Center Add Add Add Add Change Do Implement Add Merge Add Remove Move Add Merge Add Add Add Add Move Merge Commenting Fix Work Change fix Replace, Merge Start Port Change Optimize Remove Make Give Refetch Bump Merge Update Add Merge Hack Remove Add Fix Reload Center Center Center Bump Update Merge Bump Merge Add Leverage Merge add Change Add Update.&lt;/p&gt;

&lt;p&gt;Congratulations to Brent and others. &lt;a href=&quot;https://ranchero.com/netnewswire/&quot;&gt;Enjoy NetNewsWire 5.0&lt;/a&gt;‚Ä¶&lt;/p&gt;


        </description>
        <pubDate>Mon, 26 Aug 2019 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2019/08/26/NetNewsWire.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2019/08/26/NetNewsWire.html</guid>
      </item>
      <item>
        <title>Office for OS X icons</title>
        <description>
          &lt;p&gt;&lt;strong&gt;Updated 2021-05-19&lt;/strong&gt;: &lt;em&gt;added Big Sur icons.&lt;/em&gt;&lt;br /&gt;
&lt;strong&gt;Updated 2023-06-21&lt;/strong&gt;: &lt;em&gt;Added 2023 ‚ÄúShow your pride‚Äù-variation (&lt;a href=&quot;https://blogs.microsoft.com/blog/2022/06/01/microsoft-celebrates-pride-around-the-world-even-in-the-metaverse-as-we-donate-to-lgbtqia-nonprofits-release-xbox-pride-controller-and-more/&quot;&gt;2022 update apparently&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;OS X, now called macOS, was based on the &lt;a href=&quot;https://en.wikipedia.org/wiki/NeXTSTEP&quot;&gt;NeXTSTEP&lt;/a&gt; operating system. And one innovation of this operating system was large full-color icons.&lt;/p&gt;

&lt;p&gt;With the introduction of new icons this year with Office 365 (including the 2019 retail version), I felt the need to create this:&lt;/p&gt;

&lt;html&gt;
	&lt;figure tabindex=&quot;0&quot;&gt;
		&lt;img src=&quot;/images/office-for-os-x-icons-2023.png&quot; alt=&quot;Office for OS X icons (2022 Pride update)&quot; class=&quot;non_hoover&quot; /&gt;
		&lt;img src=&quot;/images/office-for-os-x-icons.png&quot; alt=&quot;Office for OS X icons (original)&quot; class=&quot;hoover&quot; /&gt;
		&lt;figcaption&gt;
			Office for OS X icons 2022 Pride update &lt;span class=&quot;non_print comment&quot;&gt;(focus or hover to display original)&lt;/span&gt;
		&lt;/figcaption&gt;
	&lt;/figure&gt;
&lt;/html&gt;

&lt;p&gt;In 2001, Office v. X was released. It‚Äôs design was very distinct from Windows, and also very &lt;a href=&quot;https://en.wikipedia.org/wiki/Aqua_(user_interface)&quot;&gt;aqua-y&lt;/a&gt;. The maximum size was 256√ó256 pixels. The 2004 icons I found were oddly sized 128√ó128 pixels. The resolution of the 2008 and 2011 icons went up to 512√ó512 pixels. These were also the last OS X-specific icons for Office.&lt;/p&gt;

&lt;p&gt;Starting with the 2016 version, the icons design of the Windows version was also used with macOS. And because of higher resolutions of displays, the dpi-count of the icons went up from 72dpi to 144dpi, making the 2016 and 2019 icons sized 1024√ó1024 pixels.&lt;/p&gt;

&lt;p&gt;Haven‚Äôt had enough? At the excellent Version Museum they have &lt;a href=&quot;https://www.versionmuseum.com/history-of/microsoft-word&quot;&gt;all Windows icons of Word&lt;/a&gt; including screenshots. They also have a page on &lt;a href=&quot;https://www.versionmuseum.com/history-of/microsoft-excel&quot;&gt;Excel&lt;/a&gt; .&lt;/p&gt;


        </description>
        <pubDate>Sat, 17 Aug 2019 00:00:00 +0200</pubDate>
        <lastBuildDate>Wed, 21 Jun 2023 00:00:00 +0200</lastBuildDate>
        <link>https://blog.zanstra.com/2019/08/17/Office-for-OS-X-icons.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2019/08/17/Office-for-OS-X-icons.html</guid>
      </item>
      <item>
        <title>On renaming a GitHub repository</title>
        <description>
          &lt;p&gt;Did you know you can rename GitHub-repositories? There are some quirks though.&lt;/p&gt;

&lt;p&gt;Check it out: &lt;a href=&quot;https://github.com/doekman/You-are-so-lame&quot;&gt;https://github.com/doekman/You-are-so-lame&lt;/a&gt;&lt;/p&gt;

        </description>
        <pubDate>Wed, 12 Jun 2019 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2019/06/12/Rename-github-repo.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2019/06/12/Rename-github-repo.html</guid>
      </item>
      <item>
        <title>A third way of putting AppleScript into git</title>
        <description>
          &lt;p&gt;There are currently two ways of putting AppleScript into git. First is just by adding the binary &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.scpt&lt;/code&gt;-files. You don‚Äôt get much benefit from using git, but it works.&lt;/p&gt;

&lt;p&gt;The &lt;em&gt;second way&lt;/em&gt; is to save your AppleScript source as text-files, and put these into git. You get advantages from git, but it is not as seamless as the first way.&lt;/p&gt;

&lt;h1 id=&quot;introducing-osagitfilter&quot;&gt;Introducing osagitfilter&lt;/h1&gt;
&lt;p&gt;Now you can combine those two ways by using the &lt;a href=&quot;https://github.com/doekman/osagitfilter/&quot;&gt;osagitfilter utility&lt;/a&gt;. Technically, it‚Äôs a &lt;a href=&quot;https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#filters_a&quot;&gt;git filter&lt;/a&gt; that translates AppleScript‚Äôs binary format into the text-representation which then will be used by git‚Äôs internal workings.&lt;/p&gt;

&lt;p&gt;See the &lt;a href=&quot;https://github.com/doekman/osagitfilter/blob/master/README.md&quot;&gt;repository‚Äôs readme&lt;/a&gt; for installation instructions. After that, you can put compiled script files, AppleScript applications and script bundles in git as if they where regular text-files. When you then clone this repository, the files are re-assembled bit-perfect.&lt;/p&gt;

&lt;p&gt;Let me demonstrate this by an example. First create a git-repository:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git init osagitfilter-demo
cd osagitfilter-demo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now create the AppleScript-file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;my_script.scpt&lt;/code&gt; in this folder with the following contents:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;display dialog &quot;What&apos;s your name&quot; default answer &quot;&quot;
say &quot;Hi there, &quot; &amp;amp; text returned of result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since we don‚Äôt want to add a binary file to git, we first need to associate the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.scpt&lt;/code&gt;-extension with the osagitfilter (you need to explicitly &lt;em&gt;opt-in&lt;/em&gt; every repository). This can be done by adding a line to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitattributes&lt;/code&gt;-file, connecting the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.scpt&lt;/code&gt;-extension to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osa&lt;/code&gt; filter:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo &quot;*.scpt filter=osa&quot; &amp;gt;&amp;gt; .gitattributes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now the files can be added to git:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git add .gitattributes my_script.scpt
git commit -m Initial
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now let‚Äôs change the script by appending &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;amp; &quot;, I like your name&quot;&lt;/code&gt; to the say command in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;my-script.scpt&lt;/code&gt; file. Don‚Äôt forget to save.&lt;/p&gt;

&lt;p&gt;Now when you run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git diff&lt;/code&gt;, you can see the changes you made as you would with text-files. You don‚Äôt need to stick with the command-line: I can confirm it works with GitHub Desktop. It should also work with other GUI‚Äôs, but I haven‚Äôt tested this.&lt;/p&gt;

&lt;h1 id=&quot;not-only-applescript&quot;&gt;Not only AppleScript&lt;/h1&gt;
&lt;p&gt;The program is called &lt;a href=&quot;https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptX/Concepts/osa.html&quot; title=&quot;The Open Scripting Architecture (OSA) provides a standard and extensible mechanism for interapplication communication in OS X.&quot;&gt;osa&lt;/a&gt;gitfilter, so you can also add JavaScript &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.scpt&lt;/code&gt;-files. There is also a feature that prevents you from accidently adding AppleScript-debugger files to git (a special file format used by the indispensible &lt;a href=&quot;scriptdebugger&quot;&gt;Script Debugger&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I hope osagitfilter will be useful tool. It will not completely replace the first two methods, but it‚Äôs nice to have an alternative to them.&lt;/p&gt;

&lt;p&gt;Let me know what you think on &lt;a href=&quot;https://twitter.com/doekezanstra/status/1125696216573140993&quot;&gt;twitter&lt;/a&gt; or &lt;a href=&quot;https://forum.latenightsw.com/t/a-third-way-of-putting-applescript-into-git/1932?u=doekman&quot;&gt;at this thread&lt;/a&gt; on Late Night Software‚Äôs AppleScript forum.&lt;/p&gt;


        </description>
        <pubDate>Mon, 06 May 2019 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2019/05/06/Introducing-osagitfilter.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2019/05/06/Introducing-osagitfilter.html</guid>
      </item>
      <item>
        <title>git-url</title>
        <description>
          &lt;p&gt;A while ago, &lt;a href=&quot;https://gist.github.com/doekman/45acdb0ceedd9dc9dc6105d0b058b06a&quot;&gt;I created a shell script&lt;/a&gt; called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git-url&lt;/code&gt;. It prints the remote origin URL of your current git-repository (or exit 1 if no git-repo is found). If the URL is in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git:&lt;/code&gt; format, it is converted to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http:&lt;/code&gt; format.&lt;/p&gt;

&lt;p&gt;Why would one write this? Because of &lt;code&gt;open `git-url`&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This will open the GitHub- or BitBucket-repository in your favorite browser. I use it all the time!&lt;/p&gt;

&lt;p&gt;Above works on macOS. Windows uses &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open&lt;/code&gt;, but I don‚Äôt know how it works with Windows Subsystem for Linux.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Updated 2019-12-04&lt;/em&gt;&lt;/strong&gt;: you now can add a SHA1 hash to go directly to that commit in the browser (GitHub and BitBucket) like
&lt;code&gt;open `git-url 7593e1a`&lt;/code&gt;, which &lt;a href=&quot;https://github.com/doekman/doekman.github.io/commit/7593e1a631df4769853948b31b610a13a4525665&quot;&gt;opens this link&lt;/a&gt;).&lt;/p&gt;


        </description>
        <pubDate>Fri, 08 Mar 2019 00:00:00 +0100</pubDate>
        <link>https://blog.zanstra.com/2019/03/08/Git-Url.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2019/03/08/Git-Url.html</guid>
        <category>cli</category>
      </item>
      <item>
        <title>Networking with iOS via Ethernet</title>
        <description>
          &lt;p&gt;This summer I went to &lt;a href=&quot;https://www.ecolonie.eu/en&quot;&gt;Ecolonie&lt;/a&gt;, a very nice place in &lt;strong&gt;France&lt;/strong&gt;. It is an idealistic place that doesn‚Äôt want to exclude anyone.
So they don‚Äôt allow digital wireless connections like Wifi and Bluetooth, because this can make some people sick.&lt;/p&gt;

&lt;p&gt;So I thought of connecting my iPad via Ethernet to internet.
&lt;a href=&quot;https://www.lifewire.com/connect-ipad-to-wired-ethernet-port-1994242&quot;&gt;I‚Äôm not&lt;/a&gt; &lt;a href=&quot;https://sixcolors.com/post/2016/07/ios-10-a-place-for-ethernet/&quot;&gt;the first one&lt;/a&gt; &lt;a href=&quot;https://9to5mac.com/2017/03/01/ios-10-2-ethernet-adapter-ui-settings-app/&quot;&gt;to try this&lt;/a&gt;, but I wanted to share my experiences.
I first bought the &lt;a href=&quot;https://www.apple.com/nl/shop/product/MK0W2ZM/A/lightning-naar-usb-3-camera-adapter?fnode=5a77c06a31d0e5022a688a2defec8127910a5c967ad27547e77a7424219ab7f0a55463cd85fcdd333d6606c4fa120dfcc8c4531e057b6b3771cf23ba049aaa7807f3e771f4c29345bec09a21c843c02ccb64fe33ce5ec4bf8ae31ebbf3f1d902&quot;&gt;Apple Lightning to USB 3 camera adapter&lt;/a&gt; (you can get cheaper clones, but non-Apple periferals can suffer from some kind of compatiblity issue).
Next was a &lt;a href=&quot;https://www.amazon.de/gp/product/B00QWYJSUG/ref=oh_aui_detailpage_o00_s01?ie=UTF8&amp;amp;psc=1&quot;&gt;powered USB hub&lt;/a&gt; from the Aukey, which already has an ethernet LAN adapter build in!
So there‚Äôs no need to buy an external USB Ethernet Adapter.&lt;/p&gt;

&lt;p&gt;This setup works (almost) perfectly with both iPhone 5 (iOS 10.3.3), iPhone SE and iPad Air 2 (both iOS 11.4.1).
I didn‚Äôt test my original iPad, since I don‚Äôt have a camera adapter with a &lt;a href=&quot;https://en.wikipedia.org/wiki/Dock_connector&quot;&gt;dock connector&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When connecting the setup, you‚Äôll get an entry between Wifi and Bluetooth in the settings menu, where you can check your TCP/IP settings.
When I plugged in my Apple USB Ethernet Adapter, the Ethernet menu shows two adapters (also one for the build-in Aukey ethernet).
Like in macOS, it will prioritize the adapters automatically and choose the ‚Äúbest‚Äù one.
I performed some speed tests, and I didn‚Äôt find significant differences between Wifi and Ethernet.&lt;/p&gt;

&lt;p&gt;I found one downside which stops it from working perfectly. I switch on Airplane Mode to make sure no digital wireless signals were emitted.
However, in that case for almost every app you open, you‚Äôll get a warning to switch off Airplane Mode.
Luckily these warnings can be dismissed without any problems, and bytes will happily flow between your device and the internet.&lt;/p&gt;

&lt;p&gt;Other findings: I charged by iPad via a cable between the lightning connector in the Camera Adapter and the fast-charge port in the USB hub.
This caused noise on the speaker I had connected to the iPad via the 3¬Ωmm audio jack.
The noise disappeared when removing the charging cable from the USB hub and did not return when connecting to iPad‚Äôs charging adapter.&lt;/p&gt;

&lt;p&gt;One final note on USB Ethernet adapters: naturally they have built-in MAC-addresses. But you can expect some complications on your network when you use a MAC-addresses to identify all allowed devices.
Devices, like in Lisa‚Äôs tablet and Bart‚Äôs iPhone‚Ä¶ D‚Äôoh!&lt;/p&gt;


        </description>
        <pubDate>Mon, 31 Dec 2018 00:00:00 +0100</pubDate>
        <link>https://blog.zanstra.com/2018/12/31/iOS_ethernet.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2018/12/31/iOS_ethernet.html</guid>
        <category>does-it-work</category>
      </item>
      <item>
        <title>Jump around</title>
        <description>
          &lt;style&gt;code {white-space:nowrap;}&lt;/style&gt;

&lt;p&gt;There are more ways &lt;a href=&quot;https://scriptingosx.com/2017/08/navigating-the-file-system/&quot;&gt;to navigate the file system&lt;/a&gt; in &lt;em&gt;bash&lt;/em&gt; than I imagined when I still was using &lt;em&gt;cmd.exe&lt;/em&gt;. Let me name some:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd&lt;/code&gt; navigates to the home folder. Like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd /users/$(whoami)&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd &quot;$HOME&quot;&lt;/code&gt; but shorter.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd -&lt;/code&gt; navigates to the previous directory. It‚Äôs like the &lt;em&gt;zap-button&lt;/em&gt; on your television remote control!&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;cd ~/Doc&lt;span title=&quot;HORIZONTAL TABULATION&quot;&gt;‚êâ&lt;/span&gt;&lt;/code&gt; &lt;em&gt;tab-completion&lt;/em&gt; works like Visual Studio‚Äôs intelli-sense, but without the dropdown and it‚Äôs case sensitive. If there is one choice, it will complete it. If there is more, you need to press &lt;abbr title=&quot;‚êâ or Horizontal Tab&quot;&gt;tab&lt;/abbr&gt; twice, and it will show a list.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pushd&lt;/code&gt;/&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;popd&lt;/code&gt;/&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dirs&lt;/code&gt; save/load/show a directory to/from the stack. Especially handy in complex scripts.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;However, I noticed I was always navigating to not that many different number of folders. I thought, wouldn‚Äôt it be handy if one could save/load folders to some kind of &lt;a href=&quot;https://en.wikipedia.org/wiki/Associative_array&quot; title=&quot;In computer science, an associative array, map, symbol table, or dictionary is an abstract data type composed of a collection of (key, value) pairs, such that each possible key appears at most once in the collection&quot;&gt;dictionary&lt;/a&gt;. I did extensive research and couldn‚Äôt find anything, so I created &lt;a href=&quot;https://github.com/doekman/go&quot;&gt;go&lt;/a&gt;. It was great. Typing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;go gh&lt;/code&gt; performed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd ~/prj/GitHub&lt;/code&gt;. To save the current folder under the name &lt;em&gt;‚Äúhere‚Äù&lt;/em&gt; would be performed by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;go here .&lt;/code&gt;. And &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;go&lt;/code&gt; would show all the current stored definitions.&lt;/p&gt;

&lt;p&gt;As I mentioned before, I performed thorough extensive research. I didn‚Äôt take it lightly. However. Apperently, the subject sometimes needs time to sink in. As today I learned from &lt;a href=&quot;http://www.secretgeek.net/pp2018&quot;&gt;a guy I have known some time&lt;/a&gt;, that he created a tool called &lt;a href=&quot;https://github.com/secretGeek/markjump&quot;&gt;markjump&lt;/a&gt;. This is basically what I made, only for &lt;em&gt;powershell&lt;/em&gt;. But his work was inspired by &lt;a href=&quot;http://jeroenjanssens.com/2013/08/16/quickly-navigate-your-filesystem-from-the-command-line.html&quot;&gt;Jeroen Janssens‚Äô&lt;/a&gt; &lt;em&gt;shell script&lt;/em&gt;, from five years ago. And he‚Äôs a Dutchie too! How could I have missed that? And his code is 1500% better!&lt;/p&gt;

&lt;p&gt;To complete my story line: Half a year ago I ran into the &lt;a href=&quot;https://github.com/rupa/z/&quot;&gt;z-utility&lt;/a&gt; (can‚Äôt remember how), which has the description &lt;a href=&quot;https://en.wikipedia.org/wiki/Jump_Around&quot;&gt;jump&lt;/a&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=XhzpxjuwZy0&quot;&gt;around&lt;/a&gt;. I was intrigued! I learnt descriptions of utilities are pretty important. And it turns out to be a pretty clever and helpful utility. It automatically remembers where you navigate to; no need to keep a list manually. And it will also keep &lt;em&gt;statistics&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;It uses &lt;em&gt;regular expressions&lt;/em&gt; to find which folder you want to navigate to. And it‚Äôs case-insensitive, so &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;z dow&lt;/code&gt; will navigate to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/Downloads&lt;/code&gt;. No need to type a capital-D. When the regular expression matches multiple folders, it uses the statistics (how recent and how frequent) to decide where to navigate to.&lt;/p&gt;

&lt;p&gt;I must say I was a bit hesitant to use it, because it seemed so‚Ä¶ technical. In the beginning of the man-page it says something like &lt;em&gt;‚ÄúTracks your most used directories, based on ‚Äòfrecency‚Äô..‚Äù&lt;/em&gt; But the &lt;em&gt;‚Äújump around‚Äù&lt;/em&gt; reeled me in. I never used my own &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;go&lt;/code&gt;-utility, and only just now looked back. Thanks &lt;a href=&quot;https://github.com/rupa&quot;&gt;rupa&lt;/a&gt;!&lt;/p&gt;


        </description>
        <pubDate>Thu, 13 Sep 2018 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2018/09/13/Jump-around.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2018/09/13/Jump-around.html</guid>
        <category>cli</category>
      </item>
      <item>
        <title>Emoji&apos;s missing from emojis.wiki</title>
        <description>
          &lt;p&gt;The following entries are supposedly missing from &lt;a href=&quot;https://emojis.wiki&quot;&gt;emojis.wiki&lt;/a&gt;. However, you could also read this article as a proposal for alternate descriptions of a part of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Miscellaneous_Technical#(2340‚Äì237F)&quot;&gt;Miscellaneous Technical range&lt;/a&gt; of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane&quot;&gt;Basic Multilingual Plane&lt;/a&gt; of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Unicode&quot;&gt;Unicode&lt;/a&gt; standard.&lt;/p&gt;

&lt;style&gt;
	big  { font-size:150%; line-height:100%; cursor:help;}
&lt;/style&gt;

&lt;ul style=&quot;list-style-type:none&quot;&gt;
	&lt;li title=&quot;U+2361: APL FUNCTIONAL SYMBOL UP TACK DIAERESIS&quot;&gt;     &lt;big&gt;‚ç°&lt;/big&gt; Chin on fist on arm&lt;/li&gt;
	&lt;li title=&quot;U+2362: APL FUNCTIONAL SYMBOL DEL DIAERESIS&quot;&gt;         &lt;big&gt;‚ç¢&lt;/big&gt; Super happy&lt;/li&gt;
	&lt;li title=&quot;U+2363: APL FUNCTIONAL SYMBOL STAR DIAERESIS&quot;&gt;        &lt;big&gt;‚ç£&lt;/big&gt; Moustache concealing mouth&lt;/li&gt;
	&lt;li title=&quot;U+2364: APL FUNCTIONAL SYMBOL JOT DIAERESIS&quot;&gt;         &lt;big&gt;‚ç§&lt;/big&gt; Disbelieve&lt;/li&gt;
	&lt;li title=&quot;U+2365: APL FUNCTIONAL SYMBOL CIRCLE DIAERESIS&quot;&gt;      &lt;big&gt;‚ç•&lt;/big&gt; Big surprise&lt;/li&gt;
	&lt;li title=&quot;U+2368: APL FUNCTIONAL SYMBOL TILDE DIAERESIS&quot;&gt;       &lt;big&gt;‚ç®&lt;/big&gt; Unsure&lt;/li&gt;
	&lt;li title=&quot;U+2369: APL FUNCTIONAL SYMBOL GREATER-THAN DIAERESIS&quot;&gt;&lt;big&gt;‚ç©&lt;/big&gt; Talking frolicsome&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you have any corrections or addendums, please let me know on Twitter.&lt;/p&gt;


        </description>
        <pubDate>Tue, 28 Aug 2018 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2018/08/28/Missing-emoji.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2018/08/28/Missing-emoji.html</guid>
      </item>
      <item>
        <title>To vowel case</title>
        <description>
          &lt;p&gt;There already was &lt;em&gt;Sentence case&lt;/em&gt;, &lt;em&gt;lower case&lt;/em&gt;, &lt;em&gt;UPPER CASE&lt;/em&gt;, &lt;em&gt;Capitalized Case&lt;/em&gt;, &lt;em&gt;AlTeRnAtInG CaSe&lt;/em&gt; and &lt;em&gt;Title Case&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;And nOw YOU cAn dO vOwEr cAsE tOO&lt;/strong&gt;!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function toVowelCase(text) {
  return text.toLowerCase().replace(/[aeiouy]+/g, match =&amp;gt; match.toUpperCase());
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Updated&lt;/strong&gt;: &lt;em&gt;a correct implementation of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;toVowelCase&lt;/code&gt; is locale-dependend. In English, the letter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;y&lt;/code&gt; is sometimes a vowel, and at other times a consonant.  The above works for the Dutch language and some other languages. Your mileage may vary.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Updated&lt;/strong&gt;: bookmarking &lt;a href=&quot;https://headlinecapitalization.com&quot;&gt;https://headlinecapitalization.com&lt;/a&gt; and &lt;a href=&quot;https://titlecaseconverter.com&quot;&gt;https://titlecaseconverter.com&lt;/a&gt;.&lt;/p&gt;

        </description>
        <pubDate>Sun, 08 Jul 2018 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2018/07/08/Vowel-case.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2018/07/08/Vowel-case.html</guid>
        <category>one-liner</category>
      </item>
      <item>
        <title>To refactor, or not to refactor</title>
        <description>
          &lt;p&gt;The code iteration below is a contemporary comment on the use of refactoring.&lt;br /&gt;
We start with this code:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
  if (year % 4) {
    return false;
  } else {
    if (year % 100) {
      return true;
    } else {
      if (year % 400)
        return false;
      else return true;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All code has to be &lt;a href=&quot;https://github.com/jasmine/jasmine&quot;&gt;unit tested&lt;/a&gt;, so we write this (&lt;em&gt;normally I start with this before writing actual code, but you know‚Ä¶&lt;/em&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function unitTests() {
  describe(&quot;leapYear tests&quot;, function() {
    expect(isLeapYear(1900)).toBe(false);
    expect(isLeapYear(1971)).toBe(false);
    expect(isLeapYear(1972)).toBe(true);
    expect(isLeapYear(2000)).toBe(true);
    expect(isLeapYear(2003)).toBe(false);
  });
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And to stay very agile, I wrote some minimal unit testing ‚Äúlibrary‚Äù (&lt;a href=&quot;http://agilemanifesto.org&quot;&gt;individuals over tools&lt;/a&gt;, anyone?):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function describe(testName, tests) {
    var groupTitle = &apos;Name: &apos;+testName+&apos; - Start: &apos;+(new Date).toISOString();
    console.group(groupTitle);
    expect.nr = 0;
    expect.errors = 0;
    tests();
    if (expect.errors == 0) console.info(&apos;All %s tests OK&apos;, expect.nr);
    else console.error(&apos;%s of %s tests failed&apos;, expect.errors, expect.nr);
    console.groupEnd(groupTitle);
}

function expect(x) {
    return {
        toBe: function(y) {
            if (x === y) console.info(&quot;%s: OK üëç&quot;, expect.nr++);
            else console.error(&quot;%s: Error üëπ&quot;, expect.nr++), expect.errors++;
        }
    };
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The unit tests all passed. Can‚Äôt wait to start with refactor step 1: removing unnecessary nesting. One step at a time.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
    if (year % 4) {
        return false;
    }
    if (year % 100) {
        return true;
    }
    if (year % 400) {
        return false;
    }
    return true;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yes‚Ä¶, much better! All tests pass. Refactor step 2, fold down into one if:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
    if (year % 4 || (!(year % 100) &amp;amp;&amp;amp; year % 400)) {
        return false;
    }
    return true;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And for the heck of it, remove the unnecessary if as well:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
    return !(year % 4 || (!(year % 100) &amp;amp;&amp;amp; year % 4000));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Oopsy. The fourth test failed. Just a typo, no worries. And since there‚Äôs already too much negativity around, I‚Äôll fix that in the next iteration, and while we are at it, move the negation to another function.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
    return !isCommonYear(year);
}
function isCommonYear(year) {
    return year % 4 || (!(year % 100) &amp;amp;&amp;amp; year % 400);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The committee unanimously decided: don‚Äôt rely on javascript‚Äôs truthiness, we want explicit code! So fixing that:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
    return !isCommonYear(year);
}
function isCommonYear(year) {
    return year % 4 != 0 || (!(year % 100 != 0) &amp;amp;&amp;amp; year % 400 != 0);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Refactor step 6, the overload of negativity was back. Fixing:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
    return !isCommonYear(year);
}
function isCommonYear(year) {
    return year % 4 != 0 || (year % 100 == 0 &amp;amp;&amp;amp; year % 400 != 0);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Refactor step 7 should be a charm. I still don‚Äôt like the code at all, so f$*# it, just use the native function:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function isLeapYear(year) {
    return new Date(year, 2 - 1, 29).getDate() == 29;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Done!&lt;/p&gt;

&lt;p&gt;Code can also be found &lt;a href=&quot;https://github.com/doekman/to-refactor...&quot;&gt;here on GitHub&lt;/a&gt;.&lt;/p&gt;


        </description>
        <pubDate>Fri, 29 Jun 2018 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2018/06/29/Refactoring.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2018/06/29/Refactoring.html</guid>
        <category>refactor</category>
      </item>
      <item>
        <title>Jekyll template for JSON Feed</title>
        <description>
          &lt;p&gt;When I learned about &lt;a href=&quot;https://jsonfeed.org/2017/05/17/announcing_json_feed&quot;&gt;JSON Feed&lt;/a&gt;, I immediately liked the idea. It‚Äôs like RSS/Atom, with the good parts (it‚Äôs de-central) and without the bad parts (no more XML, well thought of standard attributes).&lt;/p&gt;

&lt;p&gt;I‚Äôm not to sure how it will be used in practise, but it was easy enough to create a Jekyll template (&lt;a href=&quot;https://github.com/doekman/doekman.github.io/blob/master/feed.json&quot; title=&quot;Source code on GitHub&quot;&gt;source on GitHub&lt;/a&gt;). I learned it‚Äôs handy to add a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;base&lt;/code&gt;-tag to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;content_html&lt;/code&gt;-attribute, after trying &lt;a href=&quot;http://json-feed-viewer.herokuapp.com&quot;&gt;this app&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;And I made myself a &lt;a href=&quot;http://json-feed-viewer.herokuapp.com/?feed_url=http%3A%2F%2Fblog.zanstra.com%2Ffeed.json&quot;&gt;nice square logo&lt;/a&gt; too.&lt;/p&gt;


        </description>
        <pubDate>Fri, 19 May 2017 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2017/05/19/JSON-feed.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2017/05/19/JSON-feed.html</guid>
        <category>meta</category>
      </item>
      <item>
        <title>JSON, the game #2: The parsings</title>
        <description>
          &lt;p&gt;For some reason, I imagined the next step in the development of the game was to make the ‚Äòblock‚Äô move. Like up and down, and sliding to the left. For &lt;a href=&quot;http://agilemanifesto.org&quot;&gt;agile&lt;/a&gt; reasons, I want to make progress that is reflected and visible in the software. So no spending time at writing libraries first. You probably end up writing stuff you don‚Äôt even need. But when starting, I realized the partial-JSON part needed to be worked on first.&lt;/p&gt;

&lt;p&gt;To display the partial-JSON, I need a &lt;em&gt;model&lt;/em&gt; of that JSON. That model should be capable of annotating the partial-JSON with grammar issues (like missing bracket/comma, incomplete strings or just plain errors). Indentation should be addressed too. Also some dimension-data is needed, so we can determine whether the block can move up/down and when it has reached the partial-JSON surface (sorry, I can‚Äôt stop thinking in planet metaphors).&lt;/p&gt;

&lt;p&gt;When pondering on these requirements, I realized a tokenizer/parser was necessary. A library! Not very agile, right? Perhaps skipping the grammar issues first and add it later would have been a wiser choice. We will never know. Writing a parser does takes some time, but it &lt;a href=&quot;http://zanstra.com/my/RegexMate.html&quot;&gt;sure&lt;/a&gt; &lt;a href=&quot;https://cdn.rawgit.com/doekman/base2/7466e0d79d4f049dfb07e44b78f9e4c23a2ec9f0/src/utils/Parsers/samples/Uri.html&quot;&gt;is&lt;/a&gt; &lt;a href=&quot;https://cdn.rawgit.com/doekman/base2/7466e0d79d4f049dfb07e44b78f9e4c23a2ec9f0/src/utils/Parsers/samples/GWParser.html&quot;&gt;fun&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;First I started writing a &lt;a href=&quot;https://github.com/doekman/Json-the-Game/blob/61fcc2afed7bc6647ebd07510dd8af5f59d5960a/json_parser.js&quot; title=&quot;Source-code at GitHub, first version&quot;&gt;tokenizer&lt;/a&gt;. And since it‚Äôs not your average code, I used the most annoying coding convention I could think of. I learned this style with Turbo Pascal in my BBS days. Years later I discovered you can use it with languages like JavaScript, CSS, C# and even PL/SQL. But it‚Äôs too annoying for everyday use. Not only do you get &lt;em&gt;The Eye&lt;/em&gt; from your colleagues; every editor I‚Äôve tried actively works against you by messing up the indentation. Again, and again. With. Every. Single. Edit.&lt;/p&gt;

&lt;p&gt;The tokenizer splits the JSON into tokens like a string, boolean value or comma. With the parser we then can reason about tokens instead of characters, which makes life much simpler. Because we work with partial JSON, the tokenizer is made to recognizes unfinished strings and other values. Every token has an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;is_complete&lt;/code&gt;-attribute, so when rendering we can show if a brace is missing, or a string is unfinished.&lt;/p&gt;

&lt;html&gt;&lt;center style=&quot;margin-bottom:1em&quot;&gt;&lt;img src=&quot;/images/json-state-machine.jpg&quot; alt=&quot;HTML/CSS mock&quot; title=&quot;HTML/CSS mock: the &apos;ue&apos; token will go from the right to the left&quot; /&gt;&lt;/center&gt;&lt;/html&gt;

&lt;p&gt;The parser was a dragon to me. I made a lot of diagrams to create a &lt;a href=&quot;https://en.wikipedia.org/wiki/Finite-state_machine&quot;&gt;state machine&lt;/a&gt;, see above, and played with &lt;a href=&quot;http://webgraphviz.com&quot;&gt;GraphViz&lt;/a&gt; (which is pretty cool, and a little weird). Finally I thought the state machine was right, and started coding. After writing some unit tests and identifying some failures, I did realize I went in the wrong direction. A state machine is apparently not the best solution to parse JSON and the answer was right in front of me. While I was focussing on the  nice flow diagram at &lt;a href=&quot;http://json.org&quot;&gt;json.org&lt;/a&gt; (which I coincidently also knew from the Turbo Pascal manual; I know, grandpa speaking), the program I needed to write was listed as an inset on the right of that same web page! &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;object := {} | { members }&lt;/code&gt;‚Ä¶ Elementary, dear Watson‚Ä¶&lt;/p&gt;

&lt;p&gt;A well, &lt;a href=&quot;https://www.youtube.com/watch?v=AWwQsdHMT7Y&quot; title=&quot;Adventures in Failure, by MC 900ft Jesus&quot;&gt;adventures in failure&lt;/a&gt;. Start all over, and everything will be fine. At the moment, I have a validating parser (&lt;a href=&quot;https://github.com/doekman/Json-the-Game/tree/c6f9cdfd302df48813c9a1f86a85d53b45f68303&quot; title=&quot;Tokenizer &amp;amp; validating parser&quot;&gt;source here&lt;/a&gt;). It says whether the JSON is correct or not. There are still loose ends, which I will fix when needed. For example, I ignored Unicode for a big part and focussed on ASCII for now.&lt;/p&gt;

&lt;p&gt;On a side note: I also wanted to check out those new &lt;a href=&quot;http://es6-features.org/&quot;&gt;EcmaScript 2016 features&lt;/a&gt;, since every browser seems to be &lt;a href=&quot;http://kangax.github.io/compat-table/es6/&quot;&gt;supporting them&lt;/a&gt;. It‚Äôs nice to see the language is evolving, after multiple timespans of stagnation. The best feature IMHO is string interpolation.&lt;/p&gt;

&lt;p&gt;Next step is adding code to the parser for annotating tokens, and insert &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;missing&lt;/code&gt;-tokens. And render the thing in HTML naturally.&lt;/p&gt;


        </description>
        <pubDate>Sun, 14 May 2017 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2017/05/14/JSON-the-game-nr2.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2017/05/14/JSON-the-game-nr2.html</guid>
        <category>game</category>
      </item>
      <item>
        <title>JSON, the game #1: Bootstrapping it</title>
        <description>
          &lt;p&gt;Around a year ago, I had the daft idea to create some nerdy JSON-game. I had good fun thinking about some concepts, made some notes, and that was about it. Until now that is. The game: It‚Äôs coming‚Ä¶ It has already started. To keep me focussed, I will keep a journal of the creation, and you‚Äôre reading the first part.&lt;/p&gt;

&lt;p&gt;I got the ideas from series like the Brent Simmons‚Äôs &lt;a href=&quot;http://inessential.com/vespersyncdiary&quot;&gt;Vesper Sync Diary&lt;/a&gt; and Jon Skeet‚Äôs &lt;a href=&quot;https://codeblog.jonskeet.uk/2011/02/23/reimplementing-linq-to-objects-part-45-conclusion-and-list-of-posts/&quot;&gt;Reimplementing Linq to Objects&lt;/a&gt;. I found them enjoyable; a bit of a nerdy soap opera. And now is the time for me to get of my comfy sofa and produce some soap of my own.&lt;/p&gt;

&lt;p&gt;The idea of the game: &lt;a href=&quot;http://json.org&quot;&gt;JSON&lt;/a&gt; tokens are coming in, and you need to place them correctly. The initial form of the game will be Tetris-like with your head on your right shoulder: the tokens come in from the right and go to the left (alternative gravity you can think). However, this form might change from level to level (I‚Äôm thinking of the partial JSON document as a starship, crashing into JSON stars/tokens as it cruises through the JSON universe).&lt;/p&gt;

&lt;p&gt;The first step is to create some user interface mockup. A guy gotta start somewhere. My weapon of choice is HTML/CSS. At the top we have a dashboard providing some game details. Unformatted JSON will do for now. The playing field (where the partial JSON is) will have a fixed width, while the height might grow during gameplay when tokens are inserted between lines.&lt;/p&gt;

&lt;html&gt;&lt;center style=&quot;margin-bottom:1em&quot;&gt;&lt;img src=&quot;/images/json-html-mock.png&quot; alt=&quot;HTML/CSS mock&quot; title=&quot;HTML/CSS mock: the &apos;ue&apos; token will go from the right to the left&quot; /&gt;&lt;/center&gt;&lt;/html&gt;

&lt;p&gt;Positioning is done with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;em&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ch&lt;/code&gt; CSS units with a position &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;relative&lt;/code&gt;/&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;absolute&lt;/code&gt; container-combo, so I can  position things absolute within the relative container. Every character is one &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ch&lt;/code&gt; and every line is one &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;em&lt;/code&gt;. One little problem though: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;em&lt;/code&gt; is font-height, not line-height. And a line-height of 100% just doesn‚Äôt look right. But there is no such thing as a line-height unit. (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/length#Font-relative_lengths&quot; title=&quot;Line-height unit ln; unimplemented with an unknown specification&quot;&gt;Or is there?&lt;/a&gt;) This is easy fixable with a calculation, but line-height will appear in multiple places in CSS.&lt;/p&gt;

&lt;p&gt;Also some color coding needs to be added, so we can identify unbalanced grouping tokens, missing separators, incomplete tokens and downright errors. That‚Äôs why I‚Äôm not using a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre&lt;/code&gt;-element. I don‚Äôt have a definite idea about gameplay, but some ideas come to mind. An obvious solution for an error would be ‚ÄúGame over‚Äù. This can also be postponed by counting ‚Äúlives‚Äù. The error will vanish and you loose a life. Or an error could be cleared with the incoming JSON token &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\b&lt;/code&gt;. That choice will depend on the level. But I digress.&lt;/p&gt;

&lt;p&gt;This is not all markup we need (we will need a dialog-box, for the start and end of a level), but it will do for now. I put the &lt;a href=&quot;https://github.com/doekman/Json-the-Game/tree/8f14c49ec871a35cbb85d2d0b0e751ea054489c5&quot;&gt;source-code on GitHub&lt;/a&gt;, and every instalment will point to a commit so you can see how this game comes to shape. You can also &lt;a href=&quot;https://cdn.rawgit.com/doekman/Json-the-Game/8f14c49ec871a35cbb85d2d0b0e751ea054489c5/index.html&quot;&gt;‚Äúrun‚Äù the game here&lt;/a&gt; (nothing to play for now).&lt;/p&gt;

&lt;p&gt;I hope to find a good balance between enjoyability, a bit of fun and some technical remarks. And I like to hear your thoughts on &lt;a href=&quot;https://twitter.com/doekezanstra&quot;&gt;Twitter&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The next instalment will be about moving those incoming tokens.&lt;/p&gt;


        </description>
        <pubDate>Sun, 30 Apr 2017 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2017/04/30/JSON-the-game-nr1.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2017/04/30/JSON-the-game-nr1.html</guid>
        <category>game</category>
      </item>
      <item>
        <title>Only my warnings</title>
        <description>
          &lt;p&gt;Don‚Äôt you hate to be put in a situation like the following?&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;You are assigned by your company to add some functionality to some software at
some client. The client has standards and practices in place stating you can‚Äôt checkin code that produces warnings, only to find
out that a clean checkout produces loads of warnings when building!&lt;/p&gt;

  &lt;p&gt;But you can‚Äôt fix &lt;span style=&quot;font-style:normal&quot;&gt;üò¢&lt;/span&gt; those warnings. You, the super star programmer‚Ñ¢ (whose boss is getting
paid big dollars for high quality, virtually bug-free software), cannot get rid of those pesky lines of inability‚Ä¶&lt;/p&gt;

  &lt;p&gt;For starters, why judge those warnings in the first place. You‚Äôre just the new guy, you don‚Äôt want to get into any trouble. Also, 
by solving warnings, you may introduce new bugs (even though you‚Äôre super competent, after all creating bugs is just a matter of probability). 
Nobody wants that! And finally, you‚Äôre a professional. The client is only paying for the new functionality, not for you to clean
up the place. And about your collegues, you don‚Äôt want to hurt anyones feelings. 
So in short: the man says no. No way fixing those warnings, Jos√©!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Situations like these inspired us to envision a new kind of solution to those issues at hand. Let me introduce to you, without further ado, the Visual Studio extension &lt;strong&gt;Only My Warnings&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;When your solution is under source control a new list button is added to the Error List pane, with the options &lt;em&gt;All&lt;/em&gt;, &lt;em&gt;Only Mine&lt;/em&gt; and &lt;em&gt;Local Only&lt;/em&gt;. 
With the option &lt;em&gt;Local Only&lt;/em&gt; selected, the pane will only show errors, warnings and messages caused by local changes, i.e. by you!
All other messages are hidden, so you don‚Äôt have to deal with them. Victory!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/Only-my-warnings_error-list.png&quot; alt=&quot;screen shot&quot; title=&quot;Error List window from Visual Studio 2015 Community Edition&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The extension doesn‚Äôt get in the way; it only adds this one list button.
When selecting &lt;em&gt;Only Mine&lt;/em&gt;-option, the tool will gather all messages from your checkins, and show only the messages caused by you. 
And it follows branches, so you can focus at the feature that is imporant at any given moment.&lt;/p&gt;

&lt;p&gt;Now you can be productive, and still have a chat with your collegues without having an argument! While using this extension, you
will contribute to your team‚Äôs productivity. You will be a team productivity enabler! That‚Äôs how 10√ó developers are bred!
In a way, &lt;em&gt;only my warnings&lt;/em&gt; contributes to world peace.&lt;/p&gt;

&lt;p&gt;For now, the extension is still in its early alpha phase. If you want to participate in the beta-program, or want to get notified
when the extention will be released to the Visual Studio Gallery, please 
&lt;a href=&quot;https://docs.google.com/forms/d/e/1FAIpQLScMYh6JqrQn-dEA8hzIGJdJsV5-9ufCuTkfczPeXlBjNoB7KA/viewform&quot;&gt;fill out this form&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;(this is a blog post in the series: I‚Äôm perfect, communicate better with tools)&lt;/p&gt;

        </description>
        <pubDate>Thu, 08 Sep 2016 00:00:00 +0200</pubDate>
        <link>https://blog.zanstra.com/2016/09/08/Only-my-warnings.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2016/09/08/Only-my-warnings.html</guid>
        <category>tools</category>
      </item>
      <item>
        <title>A console.log() adventure; pimped</title>
        <description>
          &lt;p&gt;Over a year ago, my interwebfriend &lt;a href=&quot;https://twitter.com/secretGeek&quot;&gt;secretGeek&lt;/a&gt; created a thing. I created a fork, and pimped it &lt;a href=&quot;https://rawgit.com/doekman/console-adventure/master/console.html&quot;&gt;into this&lt;/a&gt; (&lt;em&gt;and copied some of his blog lines too&lt;/em&gt;). I urge you to go and try it out before you read on. Unfortunately you‚Äôll need to be on a desktop computer, not a mobile phone.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://rawgit.com/doekman/console-adventure/master/console.html&quot;&gt;&lt;img src=&quot;/images/console_best.png&quot; style=&quot;border:8px solid #333;box-shadow:3px 3px 7px #888&quot; title=&quot;a console.log() adventure.&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://rawgit.com/doekman/console-adventure/master/console.html&quot;&gt;Go there now&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In case you don‚Äôt have a desktop computer anymore (woah, futuristic!), or have already tried it out, I‚Äôll give some spoilers and discussion now.&lt;/p&gt;

&lt;h1 id=&quot;spoilers&quot;&gt;Spoilers&lt;/h1&gt;

&lt;p&gt;Actually, I‚Äôll give some space before the spoilers. Scroll now for spoilers.&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;‚Üì spoilers ahead ‚Üì&lt;/p&gt;

&lt;p&gt;Here is &lt;a href=&quot;http://www.secretgeek.net/console_log&quot;&gt;secretGeek‚Äôs blog-entry&lt;/a&gt;. When playing the game I had loads of fun. 
Keeping a map on graph paper, just to make sure the map is deterministic and doesn‚Äôt use some random numbers. 
After some more playing, I started looking at the code and wanted to tinker with it. So I forked it. I had some wild and interesting ideas.&lt;/p&gt;

&lt;p&gt;But somehow, nothing happened.&lt;/p&gt;

&lt;p&gt;I guess I was overthinking it. A year later, I remembered one time at work while being bored, I created the so called &lt;a href=&quot;https://zanstra.com/arc/xs4all/dds.arc/miniwebventure/index.htm&quot; title=&quot;Originally hosted at http://www.worldaccess.nl/~mobitdz around 1997 I think&quot;&gt;mini-webventure&lt;/a&gt;. I didn‚Äôt think too much back then, so why do it now?&lt;/p&gt;

&lt;p&gt;So I just started. After running around in the forest (in the game, that is), I got tired of entering parenthesis. And with 
&lt;a href=&quot;http://ejohn.org/blog/ecmascript-5-objects-and-properties/&quot;&gt;properties&lt;/a&gt; around in all browsers nowadays, there‚Äôs no need for it. So instead of typing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n()&lt;/code&gt;, you now can enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; to go north.&lt;/p&gt;

&lt;p&gt;An other thing: in a JavaScript game, I don‚Äôt consider inspecting and modifying variables cheating.
So I prevented that with an &lt;a href=&quot;http://benalman.com/news/2010/11/immediately-invoked-function-expression/&quot;&gt;iife&lt;/a&gt; and some help of &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode&quot;&gt;strict mode&lt;/a&gt; (to eliminate global variables).&lt;/p&gt;

&lt;p&gt;Multiple lines are now returned after entering a command, so they are displayed in the same font and color. And deaths 
are a bit more dramatic now. You should really try it, if you haven‚Äôt already‚Ä¶&lt;/p&gt;

&lt;p&gt;After dying too often, implementing load/save was next. First I just saved the game state, but then I realized
this was another way to cheat, so now only the entered commands are stored. Then I realized, a demo-mode
is very easy to implement. Couldn‚Äôt resist it, but it‚Äôs hidden somewhere in the game.&lt;/p&gt;

&lt;p&gt;I didn‚Äôt want to change the map or story. Just wanted to share the fun I had, both playing and pimping the game.&lt;/p&gt;


        </description>
        <pubDate>Sun, 06 Mar 2016 13:45:00 +0100</pubDate>
        <link>https://blog.zanstra.com/2016/03/06/Console-log-adventure.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2016/03/06/Console-log-adventure.html</guid>
        <category>refactor</category>
        <category>game</category>
      </item>
      <item>
        <title>First post!</title>
        <description>
          &lt;p&gt;OK, I started yet another blog.&lt;/p&gt;

&lt;p&gt;Here are the predecessors (and thank my &lt;a href=&quot;https://archive.org/donate/&quot; title=&quot;Internet Archive&quot;&gt;public backup service&lt;/a&gt; for most of this):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;2006-2011:
&lt;a href=&quot;https://web.archive.org/web/20120918224636/http://zanstra.com/base/blog&quot;&gt;http://zanstra.com/base/blog&lt;/a&gt;, 
&lt;a href=&quot;https://web.archive.org/web/20071101024331/http://zanstra.com/base/tag&quot;&gt;archive 1&lt;/a&gt; and 
&lt;a href=&quot;https://web.archive.org/web/20120802022851/http://zanstra.com/base/tag&quot;&gt;archive 2&lt;/a&gt; (DokuWiki with plugin)&lt;/li&gt;
  &lt;li&gt;2004-2006: 
&lt;a href=&quot;https://web.archive.org/web/20080206012725/http://doekman.web-log.nl/&quot;&gt;http://doekman.web-log.nl&lt;/a&gt; (hosted)&lt;/li&gt;
  &lt;li&gt;2004-2006: 
&lt;a href=&quot;https://web.archive.org/web/20061116004043/http://blogger.xs4all.nl/zanstra/&quot;&gt;http://blogger.xs4all.nl/zanstra/&lt;/a&gt; (hosted)&lt;/li&gt;
  &lt;li&gt;2002-2006: 
&lt;a href=&quot;https://zanstra.com/arc/xs4all/logs/jsLog-2004.htm&quot; title=&quot;Later: http://zanstra.home.xs4all.nl&quot;&gt;http://www.xs4all.nl/~zanstra/logs/&lt;/a&gt;
&lt;a href=&quot;https://zanstra.com/arc/xs4all/logs/jsLog.htm&quot;&gt;more entries&lt;/a&gt; and 
&lt;a href=&quot;https://zanstra.com/arc/xs4all/logs/ideaLog.htm&quot;&gt;some idea‚Äôs&lt;/a&gt; (&lt;a href=&quot;https://zanstra.com/arc/xs4all/logs/gen.bat.txt&quot;&gt;batch-file&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I also have a Tumblr micro-blogging thing called &lt;a href=&quot;https://www.tumblr.com/blog/dd3v&quot; title=&quot;Doekman Dev&quot;&gt;dd3v&lt;/a&gt;, and I used to have a micro blogging service on &lt;em&gt;doekman.micro.blog&lt;/em&gt; backed via Kickstarter (&lt;a href=&quot;/images/archive/doekman.micro.blog.png&quot;&gt;png archive&lt;/a&gt; or &lt;a href=&quot;/images/archive/doekman.micro.blog.pdf&quot;&gt;PDF print&lt;/a&gt;).&lt;/p&gt;

        </description>
        <pubDate>Sat, 09 Jan 2016 20:30:00 +0100</pubDate>
        <link>https://blog.zanstra.com/2016/01/09/First-post.html</link>
        <guid isPermaLink="true">https://blog.zanstra.com/2016/01/09/First-post.html</guid>
        <category>meta</category>
      </item>
  </channel>
</rss>
